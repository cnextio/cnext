(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[866],{47542:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ActivityMonitor=void 0;const s=n(4016);t.ActivityMonitor=class{constructor(e){this._timer=-1,this._timeout=-1,this._isDisposed=!1,this._activityStopped=new s.Signal(this),e.signal.connect(this._onSignalFired,this),this._timeout=e.timeout||1e3}get activityStopped(){return this._activityStopped}get timeout(){return this._timeout}set timeout(e){this._timeout=e}get isDisposed(){return this._isDisposed}dispose(){this._isDisposed||(this._isDisposed=!0,s.Signal.clearData(this))}_onSignalFired(e,t){clearTimeout(this._timer),this._sender=e,this._args=t,this._timer=setTimeout((()=>{this._activityStopped.emit({sender:this._sender,args:this._args})}),this._timeout)}}},79622:function(e,t,n){"use strict";var s=this&&this.__createBinding||(Object.create?function(e,t,n,s){void 0===s&&(s=n),Object.defineProperty(e,s,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,s){void 0===s&&(s=n),e[s]=t[n]}),i=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||s(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),i(n(47542),t),i(n(92086),t),i(n(47390),t),i(n(99458),t),i(n(20176),t),i(n(47846),t),i(n(32533),t),i(n(57319),t)},92086:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0})},47390:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.MarkdownCodeBlocks=void 0,function(e){e.CODE_BLOCK_MARKER="```";const t=[".markdown",".mdown",".mkdn",".md",".mkd",".mdwn",".mdtxt",".mdtext",".text",".txt",".Rmd"];class n{constructor(e){this.startLine=e,this.code="",this.endLine=-1}}e.MarkdownCodeBlock=n,e.isMarkdown=function(e){return t.indexOf(e)>-1},e.findMarkdownCodeBlocks=function(t){if(!t||""===t)return[];const s=t.split("\n"),i=[];let r=null;for(let o=0;o<s.length;o++){const t=s[o],a=0===t.indexOf(e.CODE_BLOCK_MARKER),c=null!=r;if(a||c)if(c)r&&(a?(r.endLine=o-1,i.push(r),r=null):r.code+=t+"\n");else{r=new n(o);const s=t.indexOf(e.CODE_BLOCK_MARKER),a=t.lastIndexOf(e.CODE_BLOCK_MARKER);s!==a&&(r.code=t.substring(s+e.CODE_BLOCK_MARKER.length,a),r.endLine=o,i.push(r),r=null)}}return i}}(t.MarkdownCodeBlocks||(t.MarkdownCodeBlocks={}))},99458:function(__unused_webpack_module,exports,__webpack_require__){"use strict";var process=__webpack_require__(83454),__importDefault=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(exports,"__esModule",{value:!0}),exports.PageConfig=void 0;const coreutils_1=__webpack_require__(95082),minimist_1=__importDefault(__webpack_require__(96562)),url_1=__webpack_require__(57319);var PageConfig;(function(PageConfig){function getOption(name){if(configData)return configData[name]||getBodyData(name);configData=Object.create(null);let found=!1;if("undefined"!==typeof document&&document){const e=document.getElementById("jupyter-config-data");e&&(configData=JSON.parse(e.textContent||""),found=!0)}if(!found&&"undefined"!==typeof process&&process.argv)try{const cli=minimist_1.default(process.argv.slice(2)),path=__webpack_require__(26470);let fullPath="";"jupyter-config-data"in cli?fullPath=path.resolve(cli["jupyter-config-data"]):"JUPYTER_CONFIG_DATA"in process.env&&(fullPath=path.resolve(process.env.JUPYTER_CONFIG_DATA)),fullPath&&(configData=eval("require")(fullPath))}catch(e){console.error(e)}if(coreutils_1.JSONExt.isObject(configData))for(const t in configData)"string"!==typeof configData[t]&&(configData[t]=JSON.stringify(configData[t]));else configData=Object.create(null);return configData[name]||getBodyData(name)}function setOption(e,t){const n=getOption(e);return configData[e]=t,n}function getBaseUrl(){return url_1.URLExt.normalize(getOption("baseUrl")||"/")}function getTreeUrl(){return url_1.URLExt.join(getBaseUrl(),getOption("treeUrl"))}function getShareUrl(){return url_1.URLExt.normalize(getOption("shareUrl")||getBaseUrl())}function getTreeShareUrl(){return url_1.URLExt.normalize(url_1.URLExt.join(getShareUrl(),getOption("treeUrl")))}function getUrl(e){var t,n,s,i;let r=e.toShare?getShareUrl():getBaseUrl();const o=null!==(t=e.mode)&&void 0!==t?t:getOption("mode"),a=null!==(n=e.workspace)&&void 0!==n?n:getOption("workspace"),c="single-document"===o?"doc":"lab";r=url_1.URLExt.join(r,c),a!==PageConfig.defaultWorkspace&&(r=url_1.URLExt.join(r,"workspaces",encodeURIComponent(null!==(s=getOption("workspace"))&&void 0!==s?s:PageConfig.defaultWorkspace)));const u=null!==(i=e.treePath)&&void 0!==i?i:getOption("treePath");return u&&(r=url_1.URLExt.join(r,"tree",url_1.URLExt.encodeParts(u))),r}function getWsUrl(e){let t=getOption("wsUrl");if(!t){if(0!==(e=e?url_1.URLExt.normalize(e):getBaseUrl()).indexOf("http"))return"";t="ws"+e.slice(4)}return url_1.URLExt.normalize(t)}function getNBConvertURL({path:e,format:t,download:n}){const s=url_1.URLExt.encodeParts(e),i=url_1.URLExt.join(getBaseUrl(),"nbconvert",t,s);return n?i+"?download=true":i}function getToken(){return getOption("token")||getBodyData("jupyterApiToken")}function getNotebookVersion(){const e=getOption("notebookVersion");return""===e?[0,0,0]:JSON.parse(e)}PageConfig.getOption=getOption,PageConfig.setOption=setOption,PageConfig.getBaseUrl=getBaseUrl,PageConfig.getTreeUrl=getTreeUrl,PageConfig.getShareUrl=getShareUrl,PageConfig.getTreeShareUrl=getTreeShareUrl,PageConfig.getUrl=getUrl,PageConfig.defaultWorkspace="default",PageConfig.getWsUrl=getWsUrl,PageConfig.getNBConvertURL=getNBConvertURL,PageConfig.getToken=getToken,PageConfig.getNotebookVersion=getNotebookVersion;let configData=null,Extension;function getBodyData(e){if("undefined"===typeof document||!document.body)return"";const t=document.body.dataset[e];return"undefined"===typeof t?"":decodeURIComponent(t)}!function(e){function t(e){try{const t=getOption(e);if(t)return JSON.parse(t)}catch(t){console.warn(`Unable to parse ${e}.`,t)}return[]}e.deferred=t("deferredExtensions"),e.disabled=t("disabledExtensions"),e.isDeferred=function(t){const n=t.indexOf(":");let s="";return-1!==n&&(s=t.slice(0,n)),e.deferred.some((e=>e===t||s&&e===s))},e.isDisabled=function(t){const n=t.indexOf(":");let s="";return-1!==n&&(s=t.slice(0,n)),e.disabled.some((e=>e===t||s&&e===s))}}(Extension=PageConfig.Extension||(PageConfig.Extension={}))})(PageConfig=exports.PageConfig||(exports.PageConfig={}))},20176:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PathExt=void 0;const s=n(26470);!function(e){function t(e){return 0===e.indexOf("/")&&(e=e.slice(1)),e}e.join=function(...e){const n=s.posix.join(...e);return"."===n?"":t(n)},e.basename=function(e,t){return s.posix.basename(e,t)},e.dirname=function(e){const n=t(s.posix.dirname(e));return"."===n?"":n},e.extname=function(e){return s.posix.extname(e)},e.normalize=function(e){return""===e?"":t(s.posix.normalize(e))},e.resolve=function(...e){return t(s.posix.resolve(...e))},e.relative=function(e,n){return t(s.posix.relative(e,n))},e.normalizeExtension=function(e){return e.length>0&&0!==e.indexOf(".")&&(e=`.${e}`),e},e.removeSlash=t}(t.PathExt||(t.PathExt={}))},47846:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Text=void 0,function(e){const t="\ud835\udc1a".length>1;e.jsIndexToCharIndex=function(e,n){if(t)return e;let s=e;for(let t=0;t+1<n.length&&t<e;t++){const e=n.charCodeAt(t);if(e>=55296&&e<=56319){const e=n.charCodeAt(t+1);e>=56320&&e<=57343&&(s--,t++)}}return s},e.charIndexToJsIndex=function(e,n){if(t)return e;let s=e;for(let t=0;t+1<n.length&&t<s;t++){const e=n.charCodeAt(t);if(e>=55296&&e<=56319){const e=n.charCodeAt(t+1);e>=56320&&e<=57343&&(s++,t++)}}return s},e.camelCase=function(e,t=!1){return e.replace(/^(\w)|[\s-_:]+(\w)/g,(function(e,n,s){return s?s.toUpperCase():t?n.toUpperCase():n.toLowerCase()}))},e.titleCase=function(e){return(e||"").toLowerCase().split(" ").map((e=>e.charAt(0).toUpperCase()+e.slice(1))).join(" ")}}(t.Text||(t.Text={}))},32533:function(e,t,n){"use strict";var s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.Time=void 0;const i=s(n(30381));!function(e){e.formatHuman=function(e){i.default.locale(document.documentElement.lang);let t=i.default(e).fromNow();return t="a few seconds ago"===t?"seconds ago":t,t},e.format=function(e,t="YYYY-MM-DD HH:mm"){return i.default(e).format(t)}}(t.Time||(t.Time={}))},57319:function(e,t,n){"use strict";var s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.URLExt=void 0;const i=n(26470),r=s(n(84564));!function(e){function t(e){if("undefined"!==typeof document&&document){const t=document.createElement("a");return t.href=e,t}return r.default(e)}function n(...e){const t=r.default(e[0],{}),n=`${t.protocol}${t.slashes?"//":""}${t.auth}${t.auth?"@":""}${t.host}`,s=i.posix.join(`${n&&"/"!==t.pathname[0]?"/":""}${t.pathname}`,...e.slice(1));return`${n}${"."===s?"":s}`}e.parse=t,e.getHostName=function(e){return r.default(e).hostname},e.normalize=function(e){return e&&t(e).toString()},e.join=n,e.encodeParts=function(e){return n(...e.split("/").map(encodeURIComponent))},e.objectToQueryString=function(e){const t=Object.keys(e).filter((e=>e.length>0));return t.length?"?"+t.map((t=>{const n=encodeURIComponent(String(e[t]));return t+(n?"="+n:"")})).join("&"):""},e.queryStringToObject=function(e){return e.replace(/^\?/,"").split("&").reduce(((e,t)=>{const[n,s]=t.split("=");return n.length>0&&(e[n]=decodeURIComponent(s||"")),e}),{})},e.isLocal=function(e){const{protocol:n}=t(e);return(!n||0!==e.toLowerCase().indexOf(n))&&0!==e.indexOf("/")}}(t.URLExt||(t.URLExt={}))},50591:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.BaseManager=void 0;const s=n(4016),i=n(28477);t.BaseManager=class{constructor(e){var t;this._isDisposed=!1,this._disposed=new s.Signal(this),this.serverSettings=null!==(t=e.serverSettings)&&void 0!==t?t:i.ServerConnection.makeSettings()}get disposed(){return this._disposed}get isDisposed(){return this._isDisposed}dispose(){this.isDisposed||(this._disposed.emit(void 0),s.Signal.clearData(this))}}},22486:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.BuildManager=void 0;const s=n(79622),i=n(28477);t.BuildManager=class{constructor(e={}){var t;this._url="",this.serverSettings=null!==(t=e.serverSettings)&&void 0!==t?t:i.ServerConnection.makeSettings();const{baseUrl:n,appUrl:r}=this.serverSettings;this._url=s.URLExt.join(n,r,"api/build")}get isAvailable(){return"true"===s.PageConfig.getOption("buildAvailable").toLowerCase()}get shouldCheck(){return"true"===s.PageConfig.getOption("buildCheck").toLowerCase()}getStatus(){const{_url:e,serverSettings:t}=this;return i.ServerConnection.makeRequest(e,{},t).then((e=>{if(200!==e.status)throw new i.ServerConnection.ResponseError(e);return e.json()})).then((e=>{if("string"!==typeof e.status)throw new Error("Invalid data");if("string"!==typeof e.message)throw new Error("Invalid data");return e}))}build(){const{_url:e,serverSettings:t}=this;return i.ServerConnection.makeRequest(e,{method:"POST"},t).then((e=>{if(400===e.status)throw new i.ServerConnection.ResponseError(e,"Build aborted");if(200!==e.status){const t=`Build failed with ${e.status}.\n\n        If you are experiencing the build failure after installing an extension (or trying to include previously installed extension after updating JupyterLab) please check the extension repository for new installation instructions as many extensions migrated to the prebuilt extensions system which no longer requires rebuilding JupyterLab (but uses a different installation procedure, typically involving a package manager such as 'pip' or 'conda').\n\n        If you specifically intended to install a source extension, please run 'jupyter lab build' on the server for full output.`;throw new i.ServerConnection.ResponseError(e,t)}}))}cancel(){const{_url:e,serverSettings:t}=this;return i.ServerConnection.makeRequest(e,{method:"DELETE"},t).then((e=>{if(204!==e.status)throw new i.ServerConnection.ResponseError(e)}))}}},95077:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ConfigWithDefaults=t.ConfigSection=void 0;const s=n(79622),i=n(76240);!function(e){e.create=function(e){const t=new r(e);return t.load().then((()=>t))}}(t.ConfigSection||(t.ConfigSection={}));class r{constructor(e){var t;this._url="unknown";const n=this.serverSettings=null!==(t=e.serverSettings)&&void 0!==t?t:i.ServerConnection.makeSettings();this._url=s.URLExt.join(n.baseUrl,"api/config",encodeURIComponent(e.name))}get data(){return this._data}async load(){const e=await i.ServerConnection.makeRequest(this._url,{},this.serverSettings);if(200!==e.status){throw await i.ServerConnection.ResponseError.create(e)}this._data=await e.json()}async update(e){this._data=Object.assign(Object.assign({},this._data),e);const t={method:"PATCH",body:JSON.stringify(e)},n=await i.ServerConnection.makeRequest(this._url,t,this.serverSettings);if(200!==n.status){throw await i.ServerConnection.ResponseError.create(n)}return this._data=await n.json(),this._data}}t.ConfigWithDefaults=class{constructor(e){var t,n;this._className="",this._section=e.section,this._defaults=null!==(t=e.defaults)&&void 0!==t?t:{},this._className=null!==(n=e.className)&&void 0!==n?n:""}get(e){const t=this._classData();return e in t?t[e]:this._defaults[e]}set(e,t){const n={};if(n[e]=t,this._className){const e={};return e[this._className]=n,this._section.update(e)}return this._section.update(n)}_classData(){const e=this._section.data;return this._className&&this._className in e?e[this._className]:e}}},63644:function(e,t,n){"use strict";var s=this&&this.__createBinding||(Object.create?function(e,t,n,s){void 0===s&&(s=n),Object.defineProperty(e,s,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,s){void 0===s&&(s=n),e[s]=t[n]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),r=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&s(t,e,n);return i(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.Drive=t.ContentsManager=t.Contents=void 0;const o=n(79622),a=n(35259),c=n(4016),u=n(76240),l=r(n(65460));var h;!function(e){e.validateContentsModel=function(e){l.validateContentsModel(e)},e.validateCheckpointModel=function(e){l.validateCheckpointModel(e)}}(t.Contents||(t.Contents={}));t.ContentsManager=class{constructor(e={}){var t,n;this._isDisposed=!1,this._additionalDrives=new Map,this._fileChanged=new c.Signal(this);const s=this.serverSettings=null!==(t=e.serverSettings)&&void 0!==t?t:u.ServerConnection.makeSettings();this._defaultDrive=null!==(n=e.defaultDrive)&&void 0!==n?n:new d({serverSettings:s}),this._defaultDrive.fileChanged.connect(this._onFileChanged,this)}get fileChanged(){return this._fileChanged}get isDisposed(){return this._isDisposed}dispose(){this.isDisposed||(this._isDisposed=!0,c.Signal.clearData(this))}addDrive(e){this._additionalDrives.set(e.name,e),e.fileChanged.connect(this._onFileChanged,this)}getModelDBFactory(e){var t;const[n]=this._driveForPath(e);return null!==(t=null===n||void 0===n?void 0:n.modelDBFactory)&&void 0!==t?t:null}localPath(e){const t=e.split("/"),n=t[0].split(":");return 1!==n.length&&this._additionalDrives.has(n[0])?o.PathExt.join(n.slice(1).join(":"),...t.slice(1)):o.PathExt.removeSlash(e)}normalize(e){const t=e.split(":");return 1===t.length?o.PathExt.normalize(e):`${t[0]}:${o.PathExt.normalize(t.slice(1).join(":"))}`}resolvePath(e,t){const n=this.driveName(e),s=this.localPath(e),i=o.PathExt.resolve("/",s,t);return n?`${n}:${i}`:i}driveName(e){const t=e.split("/")[0].split(":");return 1===t.length?"":this._additionalDrives.has(t[0])?t[0]:""}get(e,t){const[n,s]=this._driveForPath(e);return n.get(s,t).then((e=>{const t=[];return"directory"===e.type&&e.content?(a.each(e.content,(e=>{t.push(Object.assign(Object.assign({},e),{path:this._toGlobalPath(n,e.path)}))})),Object.assign(Object.assign({},e),{path:this._toGlobalPath(n,s),content:t})):Object.assign(Object.assign({},e),{path:this._toGlobalPath(n,s)})}))}getDownloadUrl(e){const[t,n]=this._driveForPath(e);return t.getDownloadUrl(n)}newUntitled(e={}){if(e.path){const t=this.normalize(e.path),[n,s]=this._driveForPath(t);return n.newUntitled(Object.assign(Object.assign({},e),{path:s})).then((e=>Object.assign(Object.assign({},e),{path:o.PathExt.join(t,e.name)})))}return this._defaultDrive.newUntitled(e)}delete(e){const[t,n]=this._driveForPath(e);return t.delete(n)}rename(e,t){const[n,s]=this._driveForPath(e),[i,r]=this._driveForPath(t);if(n!==i)throw Error("ContentsManager: renaming files must occur within a Drive");return n.rename(s,r).then((e=>Object.assign(Object.assign({},e),{path:this._toGlobalPath(n,r)})))}save(e,t={}){const n=this.normalize(e),[s,i]=this._driveForPath(e);return s.save(i,Object.assign(Object.assign({},t),{path:i})).then((e=>Object.assign(Object.assign({},e),{path:n})))}copy(e,t){const[n,s]=this._driveForPath(e),[i,r]=this._driveForPath(t);if(n===i)return n.copy(s,r).then((e=>Object.assign(Object.assign({},e),{path:this._toGlobalPath(n,e.path)})));throw Error("Copying files between drives is not currently implemented")}createCheckpoint(e){const[t,n]=this._driveForPath(e);return t.createCheckpoint(n)}listCheckpoints(e){const[t,n]=this._driveForPath(e);return t.listCheckpoints(n)}restoreCheckpoint(e,t){const[n,s]=this._driveForPath(e);return n.restoreCheckpoint(s,t)}deleteCheckpoint(e,t){const[n,s]=this._driveForPath(e);return n.deleteCheckpoint(s,t)}_toGlobalPath(e,t){return e===this._defaultDrive?o.PathExt.removeSlash(t):`${e.name}:${o.PathExt.removeSlash(t)}`}_driveForPath(e){const t=this.driveName(e),n=this.localPath(e);return t?[this._additionalDrives.get(t),n]:[this._defaultDrive,n]}_onFileChanged(e,t){var n,s;if(e===this._defaultDrive)this._fileChanged.emit(t);else{let i=null,r=null;(null===(n=t.newValue)||void 0===n?void 0:n.path)&&(i=Object.assign(Object.assign({},t.newValue),{path:this._toGlobalPath(e,t.newValue.path)})),(null===(s=t.oldValue)||void 0===s?void 0:s.path)&&(r=Object.assign(Object.assign({},t.oldValue),{path:this._toGlobalPath(e,t.oldValue.path)})),this._fileChanged.emit({type:t.type,newValue:i,oldValue:r})}}};class d{constructor(e={}){var t,n,s;this._isDisposed=!1,this._fileChanged=new c.Signal(this),this.name=null!==(t=e.name)&&void 0!==t?t:"Default",this._apiEndpoint=null!==(n=e.apiEndpoint)&&void 0!==n?n:"api/contents",this.serverSettings=null!==(s=e.serverSettings)&&void 0!==s?s:u.ServerConnection.makeSettings()}get fileChanged(){return this._fileChanged}get isDisposed(){return this._isDisposed}dispose(){this.isDisposed||(this._isDisposed=!0,c.Signal.clearData(this))}async get(e,t){let n=this._getUrl(e);if(t){"notebook"===t.type&&delete t.format;const e=t.content?"1":"0",s=Object.assign(Object.assign({},t),{content:e});n+=o.URLExt.objectToQueryString(s)}const s=this.serverSettings,i=await u.ServerConnection.makeRequest(n,{},s);if(200!==i.status){throw await u.ServerConnection.ResponseError.create(i)}const r=await i.json();return l.validateContentsModel(r),r}getDownloadUrl(e){const t=this.serverSettings.baseUrl;let n=o.URLExt.join(t,"files",o.URLExt.encodeParts(e));const s=document.cookie.match("\\b_xsrf=([^;]*)\\b");if(s){const e=new URL(n);e.searchParams.append("_xsrf",s[1]),n=e.toString()}return Promise.resolve(n)}async newUntitled(e={}){var t;let n="{}";e&&(e.ext&&(e.ext=h.normalizeExtension(e.ext)),n=JSON.stringify(e));const s=this.serverSettings,i=this._getUrl(null!==(t=e.path)&&void 0!==t?t:""),r={method:"POST",body:n},o=await u.ServerConnection.makeRequest(i,r,s);if(201!==o.status){throw await u.ServerConnection.ResponseError.create(o)}const a=await o.json();return l.validateContentsModel(a),this._fileChanged.emit({type:"new",oldValue:null,newValue:a}),a}async delete(e){const t=this._getUrl(e),n=this.serverSettings,s=await u.ServerConnection.makeRequest(t,{method:"DELETE"},n);if(204!==s.status){throw await u.ServerConnection.ResponseError.create(s)}this._fileChanged.emit({type:"delete",oldValue:{path:e},newValue:null})}async rename(e,t){const n=this.serverSettings,s=this._getUrl(e),i={method:"PATCH",body:JSON.stringify({path:t})},r=await u.ServerConnection.makeRequest(s,i,n);if(200!==r.status){throw await u.ServerConnection.ResponseError.create(r)}const o=await r.json();return l.validateContentsModel(o),this._fileChanged.emit({type:"rename",oldValue:{path:e},newValue:o}),o}async save(e,t={}){const n=this.serverSettings,s=this._getUrl(e),i={method:"PUT",body:JSON.stringify(t)},r=await u.ServerConnection.makeRequest(s,i,n);if(200!==r.status&&201!==r.status){throw await u.ServerConnection.ResponseError.create(r)}const o=await r.json();return l.validateContentsModel(o),this._fileChanged.emit({type:"save",oldValue:null,newValue:o}),o}async copy(e,t){const n=this.serverSettings,s=this._getUrl(t),i={method:"POST",body:JSON.stringify({copy_from:e})},r=await u.ServerConnection.makeRequest(s,i,n);if(201!==r.status){throw await u.ServerConnection.ResponseError.create(r)}const o=await r.json();return l.validateContentsModel(o),this._fileChanged.emit({type:"new",oldValue:null,newValue:o}),o}async createCheckpoint(e){const t=this._getUrl(e,"checkpoints"),n=await u.ServerConnection.makeRequest(t,{method:"POST"},this.serverSettings);if(201!==n.status){throw await u.ServerConnection.ResponseError.create(n)}const s=await n.json();return l.validateCheckpointModel(s),s}async listCheckpoints(e){const t=this._getUrl(e,"checkpoints"),n=await u.ServerConnection.makeRequest(t,{},this.serverSettings);if(200!==n.status){throw await u.ServerConnection.ResponseError.create(n)}const s=await n.json();if(!Array.isArray(s))throw new Error("Invalid Checkpoint list");for(let i=0;i<s.length;i++)l.validateCheckpointModel(s[i]);return s}async restoreCheckpoint(e,t){const n=this._getUrl(e,"checkpoints",t),s=await u.ServerConnection.makeRequest(n,{method:"POST"},this.serverSettings);if(204!==s.status){throw await u.ServerConnection.ResponseError.create(s)}}async deleteCheckpoint(e,t){const n=this._getUrl(e,"checkpoints",t),s=await u.ServerConnection.makeRequest(n,{method:"DELETE"},this.serverSettings);if(204!==s.status){throw await u.ServerConnection.ResponseError.create(s)}}_getUrl(...e){const t=e.map((e=>o.URLExt.encodeParts(e))),n=this.serverSettings.baseUrl;return o.URLExt.join(n,this._apiEndpoint,...t)}}t.Drive=d,function(e){e.normalizeExtension=function(e){return e.length>0&&0!==e.indexOf(".")&&(e=`.${e}`),e}}(h||(h={}))},65460:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.validateCheckpointModel=t.validateContentsModel=void 0;const s=n(46901);t.validateContentsModel=function(e){s.validateProperty(e,"name","string"),s.validateProperty(e,"path","string"),s.validateProperty(e,"type","string"),s.validateProperty(e,"created","string"),s.validateProperty(e,"last_modified","string"),s.validateProperty(e,"mimetype","object"),s.validateProperty(e,"content","object"),s.validateProperty(e,"format","object")},t.validateCheckpointModel=function(e){s.validateProperty(e,"id","string"),s.validateProperty(e,"last_modified","string")}},76240:function(e,t,n){"use strict";var s=this&&this.__createBinding||(Object.create?function(e,t,n,s){void 0===s&&(s=n),Object.defineProperty(e,s,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,s){void 0===s&&(s=n),e[s]=t[n]}),i=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||s(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),i(n(95077),t),i(n(63644),t),i(n(62604),t),i(n(12902),t),i(n(93079),t),i(n(28477),t),i(n(41874),t),i(n(92726),t),i(n(93247),t),i(n(45399),t),i(n(4574),t)},54500:function(e,t,n){"use strict";var s=this&&this.__createBinding||(Object.create?function(e,t,n,s){void 0===s&&(s=n),Object.defineProperty(e,s,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,s){void 0===s&&(s=n),e[s]=t[n]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),r=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&s(t,e,n);return i(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.CommHandler=void 0;const o=n(70725),a=r(n(75253));class c extends o.DisposableDelegate{constructor(e,t,n,s){super(s),this._target="",this._id="",this._id=t,this._target=e,this._kernel=n}get commId(){return this._id}get targetName(){return this._target}get onClose(){return this._onClose}set onClose(e){this._onClose=e}get onMsg(){return this._onMsg}set onMsg(e){this._onMsg=e}open(e,t,n=[]){if(this.isDisposed||this._kernel.isDisposed)throw new Error("Cannot open");const s=a.createMessage({msgType:"comm_open",channel:"shell",username:this._kernel.username,session:this._kernel.clientId,content:{comm_id:this._id,target_name:this._target,data:null!==e&&void 0!==e?e:{}},metadata:t,buffers:n});return this._kernel.sendShellMessage(s,!1,!0)}send(e,t,n=[],s=!0){if(this.isDisposed||this._kernel.isDisposed)throw new Error("Cannot send");const i=a.createMessage({msgType:"comm_msg",channel:"shell",username:this._kernel.username,session:this._kernel.clientId,content:{comm_id:this._id,data:e},metadata:t,buffers:n});return this._kernel.sendShellMessage(i,!1,s)}close(e,t,n=[]){if(this.isDisposed||this._kernel.isDisposed)throw new Error("Cannot close");const s=a.createMessage({msgType:"comm_close",channel:"shell",username:this._kernel.username,session:this._kernel.clientId,content:{comm_id:this._id,data:null!==e&&void 0!==e?e:{}},metadata:t,buffers:n}),i=this._kernel.sendShellMessage(s,!1,!0),r=this._onClose;if(r){r(a.createMessage({msgType:"comm_close",channel:"iopub",username:this._kernel.username,session:this._kernel.clientId,content:{comm_id:this._id,data:null!==e&&void 0!==e?e:{}},metadata:t,buffers:n}))}return this.dispose(),i}}t.CommHandler=c},19883:function(e,t,n){"use strict";var s=this&&this.__createBinding||(Object.create?function(e,t,n,s){void 0===s&&(s=n),Object.defineProperty(e,s,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,s){void 0===s&&(s=n),e[s]=t[n]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),r=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&s(t,e,n);return i(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.KernelConnection=void 0;const o=n(79622),a=n(95082),c=n(4016),u=n(76240),l=n(54500),h=r(n(75253)),d=n(38707),p=r(n(86002)),f=r(n(96512)),_=n(12902),g=r(n(2183)),m="_RESTARTING_";class v{constructor(e){var t,n,s,i;this._createSocket=()=>{this._errorIfDisposed(),this._clearSocket(),this._updateConnectionStatus("connecting");const e=this.serverSettings,t=o.URLExt.join(e.wsUrl,g.KERNEL_SERVICE_URL,encodeURIComponent(this._id)),n=t.replace(/^((?:\w+:)?\/\/)(?:[^@\/]+@)/,"$1");console.debug(`Starting WebSocket: ${n}`);let s=o.URLExt.join(t,"channels?session_id="+encodeURIComponent(this._clientId));const i=e.token;e.appendToken&&""!==i&&(s+=`&token=${encodeURIComponent(i)}`),this._ws=new e.WebSocket(s),this._ws.binaryType="arraybuffer";let r=!1;const a=async t=>{var n,s;if(!this._isDisposed){this._reason="",this._model=void 0;try{const n=await g.getKernelModel(this._id,e);this._model=n,"dead"===(null===n||void 0===n?void 0:n.execution_state)?this._updateStatus("dead"):this._onWSClose(t)}catch(i){if(i instanceof u.ServerConnection.NetworkError||503===(null===(n=i.response)||void 0===n?void 0:n.status)||424===(null===(s=i.response)||void 0===s?void 0:s.status)){const e=1e3*y.getRandomIntInclusive(10,30);setTimeout(a,e,t)}else this._reason="Kernel died unexpectedly",this._updateStatus("dead")}}},c=async e=>{r||(r=!0,await a(e))};this._ws.onmessage=this._onWSMessage,this._ws.onopen=this._onWSOpen,this._ws.onclose=c,this._ws.onerror=c},this._onWSOpen=e=>{this._ws.onclose=this._onWSClose,this._ws.onerror=this._onWSClose,this._updateConnectionStatus("connected")},this._onWSMessage=e=>{let t;try{t=p.deserialize(e.data),f.validateMessage(t)}catch(n){throw n.message=`Kernel message validation error: ${n.message}`,n}this._kernelSession=t.header.session,this._msgChain=this._msgChain.then((()=>this._handleMessage(t))).catch((e=>{e.message.startsWith("Canceled future for ")&&console.error(e)})),this._anyMessage.emit({msg:t,direction:"recv"})},this._onWSClose=e=>{this.isDisposed||this._reconnect()},this._id="",this._name="",this._status="unknown",this._connectionStatus="connecting",this._kernelSession="",this._isDisposed=!1,this._ws=null,this._username="",this._reconnectLimit=7,this._reconnectAttempt=0,this._reconnectTimeout=null,this._futures=new Map,this._comms=new Map,this._targetRegistry=Object.create(null),this._info=new a.PromiseDelegate,this._pendingMessages=[],this._statusChanged=new c.Signal(this),this._connectionStatusChanged=new c.Signal(this),this._disposed=new c.Signal(this),this._iopubMessage=new c.Signal(this),this._anyMessage=new c.Signal(this),this._pendingInput=new c.Signal(this),this._unhandledMessage=new c.Signal(this),this._displayIdToParentIds=new Map,this._msgIdToDisplayIds=new Map,this._msgChain=Promise.resolve(),this._hasPendingInput=!1,this._reason="",this._noOp=()=>{},this._name=e.model.name,this._id=e.model.id,this.serverSettings=null!==(t=e.serverSettings)&&void 0!==t?t:u.ServerConnection.makeSettings(),this._clientId=null!==(n=e.clientId)&&void 0!==n?n:a.UUID.uuid4(),this._username=null!==(s=e.username)&&void 0!==s?s:"",this.handleComms=null===(i=e.handleComms)||void 0===i||i,this._createSocket()}get disposed(){return this._disposed}get statusChanged(){return this._statusChanged}get connectionStatusChanged(){return this._connectionStatusChanged}get iopubMessage(){return this._iopubMessage}get unhandledMessage(){return this._unhandledMessage}get model(){return this._model||{id:this.id,name:this.name,reason:this._reason}}get anyMessage(){return this._anyMessage}get pendingInput(){return this._pendingInput}get id(){return this._id}get name(){return this._name}get username(){return this._username}get clientId(){return this._clientId}get status(){return this._status}get connectionStatus(){return this._connectionStatus}get isDisposed(){return this._isDisposed}get info(){return this._info.promise}get spec(){return this._specPromise||(this._specPromise=_.KernelSpecAPI.getSpecs(this.serverSettings).then((e=>e.kernelspecs[this._name]))),this._specPromise}clone(e={}){return new v(Object.assign({model:this.model,username:this.username,serverSettings:this.serverSettings,handleComms:!1},e))}dispose(){this.isDisposed||(this._isDisposed=!0,this._disposed.emit(),this._updateConnectionStatus("disconnected"),this._clearKernelState(),this._pendingMessages=[],this._clearSocket(),c.Signal.clearData(this))}sendShellMessage(e,t=!1,n=!0){return this._sendKernelShellControl(d.KernelShellFutureHandler,e,t,n)}sendControlMessage(e,t=!1,n=!0){return this._sendKernelShellControl(d.KernelControlFutureHandler,e,t,n)}_sendKernelShellControl(e,t,n=!1,s=!0){this._sendMessage(t),this._anyMessage.emit({msg:t,direction:"send"});const i=new e((()=>{const e=t.header.msg_id;this._futures.delete(e);const n=this._msgIdToDisplayIds.get(e);n&&(n.forEach((t=>{const n=this._displayIdToParentIds.get(t);if(n){const s=n.indexOf(e);if(-1===s)return;1===n.length?this._displayIdToParentIds.delete(t):(n.splice(s,1),this._displayIdToParentIds.set(t,n))}})),this._msgIdToDisplayIds.delete(e))}),t,n,s,this);return this._futures.set(t.header.msg_id,i),i}_sendMessage(e,t=!0){if("dead"===this.status)throw new Error("Kernel is dead");if((""===this._kernelSession||this._kernelSession===m)&&h.isInfoRequestMsg(e)){if("connected"===this.connectionStatus)return void this._ws.send(p.serialize(e));throw new Error("Could not send message: status is not connected")}if(t&&this._pendingMessages.length>0)this._pendingMessages.push(e);else if("connected"===this.connectionStatus&&this._kernelSession!==m)this._ws.send(p.serialize(e));else{if(!t)throw new Error("Could not send message");this._pendingMessages.push(e)}}async interrupt(){if(this.hasPendingInput=!1,"dead"===this.status)throw new Error("Kernel is dead");return g.interruptKernel(this.id,this.serverSettings)}async restart(){if("dead"===this.status)throw new Error("Kernel is dead");this._updateStatus("restarting"),this._clearKernelState(),this._kernelSession=m,await g.restartKernel(this.id,this.serverSettings),await this.reconnect(),this.hasPendingInput=!1}reconnect(){this._errorIfDisposed();const e=new a.PromiseDelegate,t=(n,s)=>{"connected"===s?(e.resolve(),this.connectionStatusChanged.disconnect(t,this)):"disconnected"===s&&(e.reject(new Error("Kernel connection disconnected")),this.connectionStatusChanged.disconnect(t,this))};return this.connectionStatusChanged.connect(t,this),this._reconnectAttempt=0,this._reconnect(),e.promise}async shutdown(){"dead"!==this.status&&await g.shutdownKernel(this.id,this.serverSettings),this.handleShutdown()}handleShutdown(){this._updateStatus("dead"),this.dispose()}async requestKernelInfo(){const e=h.createMessage({msgType:"kernel_info_request",channel:"shell",username:this._username,session:this._clientId,content:{}});let t;try{t=await y.handleShellMessage(this,e)}catch(n){if(this.isDisposed)return;throw n}if(this._errorIfDisposed(),t)return void 0===t.content.status&&(t.content.status="ok"),"ok"!==t.content.status?(this._info.reject("Kernel info reply errored"),t):(this._info.resolve(t.content),this._kernelSession=t.header.session,t)}requestComplete(e){const t=h.createMessage({msgType:"complete_request",channel:"shell",username:this._username,session:this._clientId,content:e});return y.handleShellMessage(this,t)}requestInspect(e){const t=h.createMessage({msgType:"inspect_request",channel:"shell",username:this._username,session:this._clientId,content:e});return y.handleShellMessage(this,t)}requestHistory(e){const t=h.createMessage({msgType:"history_request",channel:"shell",username:this._username,session:this._clientId,content:e});return y.handleShellMessage(this,t)}requestExecute(e,t=!0,n){const s=h.createMessage({msgType:"execute_request",channel:"shell",username:this._username,session:this._clientId,content:Object.assign(Object.assign({},{silent:!1,store_history:!0,user_expressions:{},allow_stdin:!0,stop_on_error:!1}),e),metadata:n});return this.sendShellMessage(s,!0,t)}requestDebug(e,t=!0){const n=h.createMessage({msgType:"debug_request",channel:"control",username:this._username,session:this._clientId,content:e});return this.sendControlMessage(n,!0,t)}requestIsComplete(e){const t=h.createMessage({msgType:"is_complete_request",channel:"shell",username:this._username,session:this._clientId,content:e});return y.handleShellMessage(this,t)}requestCommInfo(e){const t=h.createMessage({msgType:"comm_info_request",channel:"shell",username:this._username,session:this._clientId,content:e});return y.handleShellMessage(this,t)}sendInputReply(e,t){const n=h.createMessage({msgType:"input_reply",channel:"stdin",username:this._username,session:this._clientId,content:e});t&&(n.parent_header=t),this._sendMessage(n),this._anyMessage.emit({msg:n,direction:"send"}),this.hasPendingInput=!1}createComm(e,t=a.UUID.uuid4()){if(!this.handleComms)throw new Error("Comms are disabled on this kernel connection");if(this._comms.has(t))throw new Error("Comm is already created");const n=new l.CommHandler(e,t,this,(()=>{this._unregisterComm(t)}));return this._comms.set(t,n),n}hasComm(e){return this._comms.has(e)}registerCommTarget(e,t){this.handleComms&&(this._targetRegistry[e]=t)}removeCommTarget(e,t){this.handleComms&&(this.isDisposed||this._targetRegistry[e]!==t||delete this._targetRegistry[e])}registerMessageHook(e,t){var n;const s=null===(n=this._futures)||void 0===n?void 0:n.get(e);s&&s.registerMessageHook(t)}removeMessageHook(e,t){var n;const s=null===(n=this._futures)||void 0===n?void 0:n.get(e);s&&s.removeMessageHook(t)}removeInputGuard(){this.hasPendingInput=!1}async _handleDisplayId(e,t){var n,s;const i=t.parent_header.msg_id;let r=this._displayIdToParentIds.get(e);if(r){const e={header:a.JSONExt.deepCopy(t.header),parent_header:a.JSONExt.deepCopy(t.parent_header),metadata:a.JSONExt.deepCopy(t.metadata),content:a.JSONExt.deepCopy(t.content),channel:t.channel,buffers:t.buffers?t.buffers.slice():[]};e.header.msg_type="update_display_data",await Promise.all(r.map((async t=>{const n=this._futures&&this._futures.get(t);n&&await n.handleMsg(e)})))}if("update_display_data"===t.header.msg_type)return!0;r=null!==(n=this._displayIdToParentIds.get(e))&&void 0!==n?n:[],-1===r.indexOf(i)&&r.push(i),this._displayIdToParentIds.set(e,r);const o=null!==(s=this._msgIdToDisplayIds.get(i))&&void 0!==s?s:[];return-1===o.indexOf(i)&&o.push(i),this._msgIdToDisplayIds.set(i,o),!1}_clearSocket(){null!==this._ws&&(this._ws.onopen=this._noOp,this._ws.onclose=this._noOp,this._ws.onerror=this._noOp,this._ws.onmessage=this._noOp,this._ws.close(),this._ws=null)}_updateStatus(e){this._status!==e&&"dead"!==this._status&&(this._status=e,y.logKernelStatus(this),this._statusChanged.emit(e),"dead"===e&&this.dispose())}_sendPending(){for(;"connected"===this.connectionStatus&&this._kernelSession!==m&&this._pendingMessages.length>0;)this._sendMessage(this._pendingMessages[0],!1),this._pendingMessages.shift()}_clearKernelState(){this._kernelSession="",this._pendingMessages=[],this._futures.forEach((e=>{e.dispose()})),this._comms.forEach((e=>{e.dispose()})),this._msgChain=Promise.resolve(),this._futures=new Map,this._comms=new Map,this._displayIdToParentIds.clear(),this._msgIdToDisplayIds.clear()}_assertCurrentMessage(e){if(this._errorIfDisposed(),e.header.session!==this._kernelSession)throw new Error(`Canceling handling of old message: ${e.header.msg_type}`)}async _handleCommOpen(e){this._assertCurrentMessage(e);const t=e.content,n=new l.CommHandler(t.target_name,t.comm_id,this,(()=>{this._unregisterComm(t.comm_id)}));this._comms.set(t.comm_id,n);try{const s=await y.loadObject(t.target_name,t.target_module,this._targetRegistry);await s(n,e)}catch(s){throw n.close(),console.error("Exception opening new comm"),s}}async _handleCommClose(e){this._assertCurrentMessage(e);const t=e.content,n=this._comms.get(t.comm_id);if(!n)return void console.error("Comm not found for comm id "+t.comm_id);this._unregisterComm(n.commId);const s=n.onClose;s&&await s(e),n.dispose()}async _handleCommMsg(e){this._assertCurrentMessage(e);const t=e.content,n=this._comms.get(t.comm_id);if(!n)return;const s=n.onMsg;s&&await s(e)}_unregisterComm(e){this._comms.delete(e)}_updateConnectionStatus(e){if(this._connectionStatus!==e){if(this._connectionStatus=e,"connecting"!==e&&(this._reconnectAttempt=0,clearTimeout(this._reconnectTimeout)),"dead"!==this.status)if("connected"===e){let e=this._kernelSession===m,t=this.requestKernelInfo(),n=!1,s=()=>{n||(n=!0,e&&this._kernelSession===m&&(this._kernelSession=""),clearTimeout(i),this._pendingMessages.length>0&&this._sendPending())};t.then(s);let i=setTimeout(s,3e3)}else this._updateStatus("unknown");this._connectionStatusChanged.emit(e)}}async _handleMessage(e){var t,n;let s=!1;if(e.parent_header&&"iopub"===e.channel&&(h.isDisplayDataMsg(e)||h.isUpdateDisplayDataMsg(e)||h.isExecuteResultMsg(e))){const n=(null!==(t=e.content.transient)&&void 0!==t?t:{}).display_id;n&&(s=await this._handleDisplayId(n,e),this._assertCurrentMessage(e))}if(!s&&e.parent_header){const t=e.parent_header,s=null===(n=this._futures)||void 0===n?void 0:n.get(t.msg_id);if(s)await s.handleMsg(e),this._assertCurrentMessage(e);else{const n=t.session===this.clientId;"iopub"!==e.channel&&n&&this._unhandledMessage.emit(e)}}if("iopub"===e.channel){switch(e.header.msg_type){case"status":{const t=e.content.execution_state;"restarting"===t&&Promise.resolve().then((async()=>{this._updateStatus("autorestarting"),this._clearKernelState(),await this.reconnect()})),this._updateStatus(t);break}case"comm_open":this.handleComms&&await this._handleCommOpen(e);break;case"comm_msg":this.handleComms&&await this._handleCommMsg(e);break;case"comm_close":this.handleComms&&await this._handleCommClose(e)}this.isDisposed||(this._assertCurrentMessage(e),this._iopubMessage.emit(e))}}_reconnect(){if(this._errorIfDisposed(),clearTimeout(this._reconnectTimeout),this._reconnectAttempt<this._reconnectLimit){this._updateConnectionStatus("connecting");const e=y.getRandomIntInclusive(0,1e3*(Math.pow(2,this._reconnectAttempt)-1));console.warn(`Connection lost, reconnecting in ${Math.floor(e/1e3)} seconds.`),this._reconnectTimeout=setTimeout(this._createSocket,e),this._reconnectAttempt+=1}else this._updateConnectionStatus("disconnected");this._clearSocket()}_errorIfDisposed(){if(this.isDisposed)throw new Error("Kernel connection is disposed")}get hasPendingInput(){return this._hasPendingInput}set hasPendingInput(e){this._hasPendingInput=e,this._pendingInput.emit(e)}}var y;t.KernelConnection=v,function(e){e.logKernelStatus=function(e){switch(e.status){case"idle":case"busy":case"unknown":return;default:console.debug(`Kernel: ${e.status} (${e.id})`)}},e.handleShellMessage=async function(e,t){return e.sendShellMessage(t,!0).done},e.loadObject=function(e,t,n){return new Promise(((s,i)=>{if(t){if("undefined"===typeof requirejs)throw new Error("requirejs not found");requirejs([t],(n=>{if(void 0===n[e]){i(new Error(`Object '${e}' not found in module '${t}'`))}else s(n[e])}),i)}else(null===n||void 0===n?void 0:n[e])?s(n[e]):i(new Error(`Object '${e}' not found in registry`))}))},e.getRandomIntInclusive=function(e,t){return e=Math.ceil(e),t=Math.floor(t),Math.floor(Math.random()*(t-e+1))+e}}(y||(y={}))},38707:function(e,t,n){"use strict";var s=this&&this.__createBinding||(Object.create?function(e,t,n,s){void 0===s&&(s=n),Object.defineProperty(e,s,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,s){void 0===s&&(s=n),e[s]=t[n]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),r=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&s(t,e,n);return i(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.KernelShellFutureHandler=t.KernelControlFutureHandler=t.KernelFutureHandler=void 0;const o=n(95082),a=n(70725),c=r(n(75253));class u extends a.DisposableDelegate{constructor(e,t,n,s,i){super(e),this._status=0,this._stdin=l.noOp,this._iopub=l.noOp,this._reply=l.noOp,this._done=new o.PromiseDelegate,this._hooks=new l.HookList,this._disposeOnDone=!0,this._msg=t,n||this._setFlag(l.KernelFutureFlag.GotReply),this._disposeOnDone=s,this._kernel=i}get msg(){return this._msg}get done(){return this._done.promise}get onReply(){return this._reply}set onReply(e){this._reply=e}get onIOPub(){return this._iopub}set onIOPub(e){this._iopub=e}get onStdin(){return this._stdin}set onStdin(e){this._stdin=e}registerMessageHook(e){if(this.isDisposed)throw new Error("Kernel future is disposed");this._hooks.add(e)}removeMessageHook(e){this.isDisposed||this._hooks.remove(e)}sendInputReply(e,t){this._kernel.sendInputReply(e,t)}dispose(){this._stdin=l.noOp,this._iopub=l.noOp,this._reply=l.noOp,this._hooks=null,this._testFlag(l.KernelFutureFlag.IsDone)||(this._done.promise.catch((()=>{})),this._done.reject(new Error(`Canceled future for ${this.msg.header.msg_type} message before replies were done`))),super.dispose()}async handleMsg(e){switch(e.channel){case"control":case"shell":e.channel===this.msg.channel&&e.parent_header.msg_id===this.msg.header.msg_id&&await this._handleReply(e);break;case"stdin":await this._handleStdin(e);break;case"iopub":await this._handleIOPub(e)}}async _handleReply(e){const t=this._reply;t&&await t(e),this._replyMsg=e,this._setFlag(l.KernelFutureFlag.GotReply),this._testFlag(l.KernelFutureFlag.GotIdle)&&this._handleDone()}async _handleStdin(e){this._kernel.hasPendingInput=!0;const t=this._stdin;t&&await t(e)}async _handleIOPub(e){const t=await this._hooks.process(e),n=this._iopub;t&&n&&await n(e),c.isStatusMsg(e)&&"idle"===e.content.execution_state&&(this._setFlag(l.KernelFutureFlag.GotIdle),this._testFlag(l.KernelFutureFlag.GotReply)&&this._handleDone())}_handleDone(){this._testFlag(l.KernelFutureFlag.IsDone)||(this._setFlag(l.KernelFutureFlag.IsDone),this._done.resolve(this._replyMsg),this._disposeOnDone&&this.dispose())}_testFlag(e){return 0!==(this._status&e)}_setFlag(e){this._status|=e}}t.KernelFutureHandler=u;t.KernelControlFutureHandler=class extends u{};var l;t.KernelShellFutureHandler=class extends u{},function(e){e.noOp=()=>{};const t="function"===typeof requestAnimationFrame?requestAnimationFrame:setImmediate;let n;e.HookList=class{constructor(){this._hooks=[]}add(e){this.remove(e),this._hooks.push(e)}remove(e){const t=this._hooks.indexOf(e);t>=0&&(this._hooks[t]=null,this._scheduleCompact())}async process(e){await this._processing;const t=new o.PromiseDelegate;let n;this._processing=t.promise;for(let i=this._hooks.length-1;i>=0;i--){const r=this._hooks[i];if(null!==r){try{n=await r(e)}catch(s){n=!0,console.error(s)}if(!1===n)return t.resolve(void 0),!1}}return t.resolve(void 0),!0}_scheduleCompact(){this._compactScheduled||(this._compactScheduled=!0,t((()=>{this._processing=this._processing.then((()=>{this._compactScheduled=!1,this._compact()}))})))}_compact(){let e=0;for(let t=0,n=this._hooks.length;t<n;t++){const n=this._hooks[t];null===this._hooks[t]?e++:this._hooks[t-e]=n}this._hooks.length-=e}},function(e){e[e.GotReply=1]="GotReply",e[e.GotIdle=2]="GotIdle",e[e.IsDone=4]="IsDone",e[e.DisposeOnDone=8]="DisposeOnDone"}(n=e.KernelFutureFlag||(e.KernelFutureFlag={}))}(l||(l={}))},62604:function(e,t,n){"use strict";var s=this&&this.__createBinding||(Object.create?function(e,t,n,s){void 0===s&&(s=n),Object.defineProperty(e,s,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,s){void 0===s&&(s=n),e[s]=t[n]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),r=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&s(t,e,n);return i(t,e),t},o=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||s(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),t.KernelConnection=t.KernelAPI=t.KernelMessage=t.Kernel=void 0;const a=r(n(38868));t.Kernel=a;const c=r(n(75253));t.KernelMessage=c;const u=r(n(2183));t.KernelAPI=u;const l=n(19883);Object.defineProperty(t,"KernelConnection",{enumerable:!0,get:function(){return l.KernelConnection}}),o(n(71825),t)},38868:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0})},71825:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.KernelManager=void 0;const s=n(35259),i=n(23114),r=n(4016),o=n(76240),a=n(50591),c=n(2183),u=n(19883);class l extends a.BaseManager{constructor(e={}){var t;super(e),this._isReady=!1,this._kernelConnections=new Set,this._models=new Map,this._runningChanged=new r.Signal(this),this._connectionFailure=new r.Signal(this),this._pollModels=new i.Poll({auto:!1,factory:()=>this.requestRunning(),frequency:{interval:1e4,backoff:!0,max:3e5},name:"@jupyterlab/services:KernelManager#models",standby:null!==(t=e.standby)&&void 0!==t?t:"when-hidden"}),this._ready=(async()=>{await this._pollModels.start(),await this._pollModels.tick,this._isReady=!0})()}get isReady(){return this._isReady}get ready(){return this._ready}get runningChanged(){return this._runningChanged}get connectionFailure(){return this._connectionFailure}dispose(){this.isDisposed||(this._models.clear(),this._kernelConnections.forEach((e=>e.dispose())),this._pollModels.dispose(),super.dispose())}connectTo(e){var t;const{id:n}=e.model;let s=null===(t=e.handleComms)||void 0===t||t;if(void 0===e.handleComms)for(const r of this._kernelConnections)if(r.id===n&&r.handleComms){s=!1;break}const i=new u.KernelConnection(Object.assign(Object.assign({handleComms:s},e),{serverSettings:this.serverSettings}));return this._onStarted(i),this._models.has(n)||this.refreshRunning().catch((()=>{})),i}running(){return s.iter([...this._models.values()])}async refreshRunning(){await this._pollModels.refresh(),await this._pollModels.tick}async startNew(e={},t={}){const n=await c.startNew(e,this.serverSettings);return this.connectTo(Object.assign(Object.assign({},t),{model:n}))}async shutdown(e){await c.shutdownKernel(e,this.serverSettings),await this.refreshRunning()}async shutdownAll(){await this.refreshRunning(),await Promise.all([...this._models.keys()].map((e=>c.shutdownKernel(e,this.serverSettings)))),await this.refreshRunning()}async findById(e){return this._models.has(e)||await this.refreshRunning(),this._models.get(e)}async requestRunning(){var e,t;let n;try{n=await c.listRunning(this.serverSettings)}catch(i){throw(i instanceof o.ServerConnection.NetworkError||503===(null===(e=i.response)||void 0===e?void 0:e.status)||424===(null===(t=i.response)||void 0===t?void 0:t.status))&&this._connectionFailure.emit(i),i}this.isDisposed||this._models.size===n.length&&s.every(n,(e=>{const t=this._models.get(e.id);return!!t&&t.name===e.name}))||(this._models=new Map(n.map((e=>[e.id,e]))),this._kernelConnections.forEach((e=>{this._models.has(e.id)||e.handleShutdown()})),this._runningChanged.emit(n))}_onStarted(e){this._kernelConnections.add(e),e.statusChanged.connect(this._onStatusChanged,this),e.disposed.connect(this._onDisposed,this)}_onDisposed(e){this._kernelConnections.delete(e),this.refreshRunning().catch((()=>{}))}_onStatusChanged(e,t){"dead"===t&&this.refreshRunning().catch((()=>{}))}}t.KernelManager=l},75253:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isInputReplyMsg=t.isInputRequestMsg=t.isDebugReplyMsg=t.isDebugRequestMsg=t.isExecuteReplyMsg=t.isInfoRequestMsg=t.isCommMsgMsg=t.isCommCloseMsg=t.isCommOpenMsg=t.isDebugEventMsg=t.isClearOutputMsg=t.isStatusMsg=t.isErrorMsg=t.isExecuteResultMsg=t.isExecuteInputMsg=t.isUpdateDisplayDataMsg=t.isDisplayDataMsg=t.isStreamMsg=t.createMessage=void 0;const s=n(95082);t.createMessage=function(e){var t,n,i,r,o;return{buffers:null!==(t=e.buffers)&&void 0!==t?t:[],channel:e.channel,content:e.content,header:{date:(new Date).toISOString(),msg_id:null!==(n=e.msgId)&&void 0!==n?n:s.UUID.uuid4(),msg_type:e.msgType,session:e.session,username:null!==(i=e.username)&&void 0!==i?i:"",version:"5.2"},metadata:null!==(r=e.metadata)&&void 0!==r?r:{},parent_header:null!==(o=e.parentHeader)&&void 0!==o?o:{}}},t.isStreamMsg=function(e){return"stream"===e.header.msg_type},t.isDisplayDataMsg=function(e){return"display_data"===e.header.msg_type},t.isUpdateDisplayDataMsg=function(e){return"update_display_data"===e.header.msg_type},t.isExecuteInputMsg=function(e){return"execute_input"===e.header.msg_type},t.isExecuteResultMsg=function(e){return"execute_result"===e.header.msg_type},t.isErrorMsg=function(e){return"error"===e.header.msg_type},t.isStatusMsg=function(e){return"status"===e.header.msg_type},t.isClearOutputMsg=function(e){return"clear_output"===e.header.msg_type},t.isDebugEventMsg=function(e){return"debug_event"===e.header.msg_type},t.isCommOpenMsg=function(e){return"comm_open"===e.header.msg_type},t.isCommCloseMsg=function(e){return"comm_close"===e.header.msg_type},t.isCommMsgMsg=function(e){return"comm_msg"===e.header.msg_type},t.isInfoRequestMsg=function(e){return"kernel_info_request"===e.header.msg_type},t.isExecuteReplyMsg=function(e){return"execute_reply"===e.header.msg_type},t.isDebugRequestMsg=function(e){return"debug_request"===e.header.msg_type},t.isDebugReplyMsg=function(e){return"debug_reply"===e.header.msg_type},t.isInputRequestMsg=function(e){return"input_request"===e.header.msg_type},t.isInputReplyMsg=function(e){return"input_reply"===e.header.msg_type}},2183:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getKernelModel=t.shutdownKernel=t.interruptKernel=t.restartKernel=t.startNew=t.listRunning=t.KERNEL_SERVICE_URL=void 0;const s=n(28477),i=n(79622),r=n(96512);t.KERNEL_SERVICE_URL="api/kernels",t.listRunning=async function(e=s.ServerConnection.makeSettings()){const n=i.URLExt.join(e.baseUrl,t.KERNEL_SERVICE_URL),o=await s.ServerConnection.makeRequest(n,{},e);if(200!==o.status){throw await s.ServerConnection.ResponseError.create(o)}const a=await o.json();return r.validateModels(a),a},t.startNew=async function(e={},n=s.ServerConnection.makeSettings()){const o=i.URLExt.join(n.baseUrl,t.KERNEL_SERVICE_URL),a={method:"POST",body:JSON.stringify(e)},c=await s.ServerConnection.makeRequest(o,a,n);if(201!==c.status){throw await s.ServerConnection.ResponseError.create(c)}const u=await c.json();return r.validateModel(u),u},t.restartKernel=async function(e,n=s.ServerConnection.makeSettings()){const o=i.URLExt.join(n.baseUrl,t.KERNEL_SERVICE_URL,encodeURIComponent(e),"restart"),a=await s.ServerConnection.makeRequest(o,{method:"POST"},n);if(200!==a.status){throw await s.ServerConnection.ResponseError.create(a)}const c=await a.json();r.validateModel(c)},t.interruptKernel=async function(e,n=s.ServerConnection.makeSettings()){const r=i.URLExt.join(n.baseUrl,t.KERNEL_SERVICE_URL,encodeURIComponent(e),"interrupt"),o=await s.ServerConnection.makeRequest(r,{method:"POST"},n);if(204!==o.status){throw await s.ServerConnection.ResponseError.create(o)}},t.shutdownKernel=async function(e,n=s.ServerConnection.makeSettings()){const r=i.URLExt.join(n.baseUrl,t.KERNEL_SERVICE_URL,encodeURIComponent(e)),o=await s.ServerConnection.makeRequest(r,{method:"DELETE"},n);if(404===o.status){const t=`The kernel "${e}" does not exist on the server`;console.warn(t)}else if(204!==o.status){throw await s.ServerConnection.ResponseError.create(o)}},t.getKernelModel=async function(e,n=s.ServerConnection.makeSettings()){const o=i.URLExt.join(n.baseUrl,t.KERNEL_SERVICE_URL,encodeURIComponent(e)),a=await s.ServerConnection.makeRequest(o,{},n);if(404===a.status)return;if(200!==a.status){throw await s.ServerConnection.ResponseError.create(a)}const c=await a.json();return r.validateModel(c),c}},86002:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.serialize=t.deserialize=void 0,t.deserialize=function(e){let t;return t="string"===typeof e?JSON.parse(e):function(e){const t=new DataView(e),n=t.getUint32(0),s=[];if(n<2)throw new Error("Invalid incoming Kernel Message");for(let o=1;o<=n;o++)s.push(t.getUint32(4*o));const i=new Uint8Array(e.slice(s[0],s[1])),r=JSON.parse(new TextDecoder("utf8").decode(i));r.buffers=[];for(let o=1;o<n;o++){const t=s[o],n=s[o+1]||e.byteLength;r.buffers.push(new DataView(e.slice(t,n)))}return r}(e),t},t.serialize=function(e){var t;let n;return n=(null===(t=e.buffers)||void 0===t?void 0:t.length)?function(e){const t=[],n=[],s=new TextEncoder;let i=[];void 0!==e.buffers&&(i=e.buffers,delete e.buffers);const r=s.encode(JSON.stringify(e));n.push(r.buffer);for(let u=0;u<i.length;u++){const e=i[u];n.push(ArrayBuffer.isView(e)?e.buffer:e)}const o=n.length;t.push(4*(o+1));for(let u=0;u+1<n.length;u++)t.push(t[t.length-1]+n[u].byteLength);const a=new Uint8Array(t[t.length-1]+n[n.length-1].byteLength),c=new DataView(a.buffer);c.setUint32(0,o);for(let u=0;u<t.length;u++)c.setUint32(4*(u+1),t[u]);for(let u=0;u<n.length;u++)a.set(new Uint8Array(n[u]),t[u]);return a.buffer}(e):JSON.stringify(e),n}},96512:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.validateModels=t.validateModel=t.validateMessage=void 0;const s=n(46901),i=["username","version","session","msg_id","msg_type"],r={stream:{name:"string",text:"string"},display_data:{data:"object",metadata:"object"},execute_input:{code:"string",execution_count:"number"},execute_result:{execution_count:"number",data:"object",metadata:"object"},error:{ename:"string",evalue:"string",traceback:"object"},status:{execution_state:["string",["starting","idle","busy","restarting","dead"]]},clear_output:{wait:"boolean"},comm_open:{comm_id:"string",target_name:"string",data:"object"},comm_msg:{comm_id:"string",data:"object"},comm_close:{comm_id:"string"},shutdown_reply:{restart:"boolean"}};function o(e){s.validateProperty(e,"name","string"),s.validateProperty(e,"id","string")}t.validateMessage=function(e){s.validateProperty(e,"metadata","object"),s.validateProperty(e,"content","object"),s.validateProperty(e,"channel","string"),function(e){for(let t=0;t<i.length;t++)s.validateProperty(e,i[t],"string")}(e.header),"iopub"===e.channel&&function(e){if("iopub"===e.channel){const t=r[e.header.msg_type];if(void 0===t)return;const n=Object.keys(t),i=e.content;for(let e=0;e<n.length;e++){let r=t[n[e]];Array.isArray(r)||(r=[r]),s.validateProperty(i,n[e],...r)}}}(e)},t.validateModel=o,t.validateModels=function(e){if(!Array.isArray(e))throw new Error("Invalid kernel list");e.forEach((e=>o(e)))}},12902:function(e,t,n){"use strict";var s=this&&this.__createBinding||(Object.create?function(e,t,n,s){void 0===s&&(s=n),Object.defineProperty(e,s,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,s){void 0===s&&(s=n),e[s]=t[n]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),r=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&s(t,e,n);return i(t,e),t},o=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||s(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),t.KernelSpecAPI=t.KernelSpec=void 0;const a=r(n(79453));t.KernelSpec=a;const c=r(n(33415));t.KernelSpecAPI=c,o(n(54936),t)},79453:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0})},54936:function(e,t,n){"use strict";var s=this&&this.__createBinding||(Object.create?function(e,t,n,s){void 0===s&&(s=n),Object.defineProperty(e,s,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,s){void 0===s&&(s=n),e[s]=t[n]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),r=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&s(t,e,n);return i(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.KernelSpecManager=void 0;const o=n(95082),a=n(23114),c=n(4016),u=r(n(33415)),l=n(50591);class h extends l.BaseManager{constructor(e={}){var t;super(e),this._isReady=!1,this._connectionFailure=new c.Signal(this),this._specs=null,this._specsChanged=new c.Signal(this),this._ready=Promise.all([this.requestSpecs()]).then((e=>{})).catch((e=>{})).then((()=>{this.isDisposed||(this._isReady=!0)})),this._pollSpecs=new a.Poll({auto:!1,factory:()=>this.requestSpecs(),frequency:{interval:61e3,backoff:!0,max:3e5},name:"@jupyterlab/services:KernelSpecManager#specs",standby:null!==(t=e.standby)&&void 0!==t?t:"when-hidden"}),this.ready.then((()=>{this._pollSpecs.start()}))}get isReady(){return this._isReady}get ready(){return this._ready}get specs(){return this._specs}get specsChanged(){return this._specsChanged}get connectionFailure(){return this._connectionFailure}dispose(){this._pollSpecs.dispose(),super.dispose()}async refreshSpecs(){await this._pollSpecs.refresh(),await this._pollSpecs.tick}async requestSpecs(){const e=await u.getSpecs(this.serverSettings);this.isDisposed||o.JSONExt.deepEqual(e,this._specs)||(this._specs=e,this._specsChanged.emit(e))}}t.KernelSpecManager=h},33415:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getSpecs=void 0;const s=n(28477),i=n(73103),r=n(79622);t.getSpecs=async function(e=s.ServerConnection.makeSettings()){const t=r.URLExt.join(e.baseUrl,"api/kernelspecs"),n=await s.ServerConnection.makeRequest(t,{},e);if(200!==n.status){throw await s.ServerConnection.ResponseError.create(n)}const o=await n.json();return i.validateSpecModels(o)}},73103:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.validateSpecModels=t.validateSpecModel=void 0;const s=n(46901);function i(e){const t=e.spec;if(!t)throw new Error("Invalid kernel spec");s.validateProperty(e,"name","string"),s.validateProperty(e,"resources","object"),s.validateProperty(t,"language","string"),s.validateProperty(t,"display_name","string"),s.validateProperty(t,"argv","array");let n=null;t.hasOwnProperty("metadata")&&(s.validateProperty(t,"metadata","object"),n=t.metadata);let i=null;return t.hasOwnProperty("env")&&(s.validateProperty(t,"env","object"),i=t.env),{name:e.name,resources:e.resources,language:t.language,display_name:t.display_name,argv:t.argv,metadata:n,env:i}}t.validateSpecModel=i,t.validateSpecModels=function(e){if(!e.hasOwnProperty("kernelspecs"))throw new Error("No kernelspecs found");let t=Object.keys(e.kernelspecs);const n=Object.create(null);let s=e.default;for(let o=0;o<t.length;o++){const s=e.kernelspecs[t[o]];try{n[t[o]]=i(s)}catch(r){console.warn(`Removing errant kernel spec: ${t[o]}`)}}if(t=Object.keys(n),!t.length)throw new Error("No valid kernelspecs found");return s&&"string"===typeof s&&s in n||(s=t[0],console.warn(`Default kernel not found, using '${t[0]}'`)),{default:s,kernelspecs:n}}},93079:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ServiceManager=void 0;const s=n(4016),i=n(22486),r=n(4574),o=n(63644),a=n(12902),c=n(41874),u=n(92726),l=n(93247),h=n(28477),d=n(45399),p=n(62604);t.ServiceManager=class{constructor(e={}){var t,n;this._isDisposed=!1,this._connectionFailure=new s.Signal(this),this._isReady=!1;const f=e.defaultDrive,_=null!==(t=e.serverSettings)&&void 0!==t?t:h.ServerConnection.makeSettings(),g={defaultDrive:f,serverSettings:_,standby:null!==(n=e.standby)&&void 0!==n?n:"when-hidden"},m=new p.KernelManager(g);this.serverSettings=_,this.contents=new o.ContentsManager(g),this.sessions=new c.SessionManager(Object.assign(Object.assign({},g),{kernelManager:m})),this.settings=new u.SettingManager(g),this.terminals=new l.TerminalManager(g),this.builder=new i.BuildManager(g),this.workspaces=new d.WorkspaceManager(g),this.nbconvert=new r.NbConvertManager(g),this.kernelspecs=new a.KernelSpecManager(g),this.kernelspecs.connectionFailure.connect(this._onConnectionFailure,this),this.sessions.connectionFailure.connect(this._onConnectionFailure,this),this.terminals.connectionFailure.connect(this._onConnectionFailure,this);const v=[this.sessions.ready,this.kernelspecs.ready];this.terminals.isAvailable()&&v.push(this.terminals.ready),this._readyPromise=Promise.all(v).then((()=>{this._isReady=!0}))}get connectionFailure(){return this._connectionFailure}get isDisposed(){return this._isDisposed}dispose(){this.isDisposed||(this._isDisposed=!0,s.Signal.clearData(this),this.contents.dispose(),this.sessions.dispose(),this.terminals.dispose())}get isReady(){return this._isReady}get ready(){return this._readyPromise}_onConnectionFailure(e,t){this._connectionFailure.emit(t)}}},4574:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.NbConvertManager=void 0;const s=n(79622),i=n(28477);t.NbConvertManager=class{constructor(e={}){var t;this.serverSettings=null!==(t=e.serverSettings)&&void 0!==t?t:i.ServerConnection.makeSettings()}async getExportFormats(){const e=this.serverSettings.baseUrl,t=s.URLExt.join(e,"api/nbconvert"),{serverSettings:n}=this,r=await i.ServerConnection.makeRequest(t,{},n);if(200!==r.status){throw await i.ServerConnection.ResponseError.create(r)}const o=await r.json(),a={};return Object.keys(o).forEach((function(e){const t=o[e].output_mimetype;a[e]={output_mimetype:t}})),a}}},28477:function(e,t,n){"use strict";var s,i,r,o=n(83454);Object.defineProperty(t,"__esModule",{value:!0}),t.ServerConnection=void 0;const a=n(79622);let c,u,l,h;if("undefined"===typeof window){const e=n(21763);c=null!==(s=n.g.fetch)&&void 0!==s?s:e,l=null!==(i=n.g.Request)&&void 0!==i?i:e.Request,u=null!==(r=n.g.Headers)&&void 0!==r?r:e.Headers,h=n(12447)}else c=fetch,l=Request,u=Headers,h=WebSocket;var d,p;!function(e){e.makeSettings=function(e){return p.makeSettings(e)},e.makeRequest=function(e,t,n){return p.handleRequest(e,t,n)};class t extends Error{constructor(e,t=`Invalid response: ${e.status} ${e.statusText}`,n=""){super(t),this.response=e,this.traceback=n}static async create(e){try{const n=await e.json();return n.traceback&&console.error(n.traceback),n.message?new t(e,n.message):new t(e)}catch(n){return console.debug(n),new t(e)}}}e.ResponseError=t;class n extends TypeError{constructor(e){super(e.message),this.stack=e.stack}}e.NetworkError=n}(d=t.ServerConnection||(t.ServerConnection={})),function(e){e.makeSettings=function(e={}){var t;const n=a.PageConfig.getBaseUrl(),s=a.PageConfig.getWsUrl(),i=a.URLExt.normalize(e.baseUrl)||n;let r=e.wsUrl;return r||i!==n||(r=s),r||0!==i.indexOf("http")||(r="ws"+i.slice(4)),r=null!==r&&void 0!==r?r:s,Object.assign(Object.assign({init:{cache:"no-store",credentials:"same-origin"},fetch:c,Headers:u,Request:l,WebSocket:h,token:a.PageConfig.getToken(),appUrl:a.PageConfig.getOption("appUrl"),appendToken:"undefined"===typeof window||"undefined"!==typeof o&&void 0!==(null===(t=null===o||void 0===o?void 0:o.env)||void 0===t?void 0:t.JEST_WORKER_ID)||a.URLExt.getHostName(n)!==a.URLExt.getHostName(r)},e),{baseUrl:i,wsUrl:r})},e.handleRequest=function(e,t,n){var s;if(0!==e.indexOf(n.baseUrl))throw new Error("Can only be used for notebook server requests");"no-store"===(null!==(s=t.cache)&&void 0!==s?s:n.init.cache)&&(e+=(/\?/.test(e)?"&":"?")+(new Date).getTime());const i=new n.Request(e,Object.assign(Object.assign({},n.init),t));let r=!1;if(n.token&&(r=!0,i.headers.append("Authorization",`token ${n.token}`)),"undefined"!==typeof document&&(null===document||void 0===document?void 0:document.cookie)){const e=function(e){const t=document.cookie.match("\\b"+e+"=([^;]*)\\b");return null===t||void 0===t?void 0:t[1]}("_xsrf");void 0!==e&&(r=!0,i.headers.append("X-XSRFToken",e))}return!i.headers.has("Content-Type")&&r&&i.headers.set("Content-Type","application/json"),n.fetch.call(null,i).catch((e=>{throw new d.NetworkError(e)}))}}(p||(p={}))},35410:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SessionConnection=void 0;const s=n(4016),i=n(76240),r=n(56807),o=n(95082);t.SessionConnection=class{constructor(e){var t,n,r,a;this._id="",this._path="",this._name="",this._type="",this._kernel=null,this._isDisposed=!1,this._disposed=new s.Signal(this),this._kernelChanged=new s.Signal(this),this._statusChanged=new s.Signal(this),this._connectionStatusChanged=new s.Signal(this),this._pendingInput=new s.Signal(this),this._iopubMessage=new s.Signal(this),this._unhandledMessage=new s.Signal(this),this._anyMessage=new s.Signal(this),this._propertyChanged=new s.Signal(this),this._id=e.model.id,this._name=e.model.name,this._path=e.model.path,this._type=e.model.type,this._username=null!==(t=e.username)&&void 0!==t?t:"",this._clientId=null!==(n=e.clientId)&&void 0!==n?n:o.UUID.uuid4(),this._connectToKernel=e.connectToKernel,this._kernelConnectionOptions=null!==(r=e.kernelConnectionOptions)&&void 0!==r?r:{},this.serverSettings=null!==(a=e.serverSettings)&&void 0!==a?a:i.ServerConnection.makeSettings(),this.setupKernel(e.model.kernel)}get disposed(){return this._disposed}get kernelChanged(){return this._kernelChanged}get statusChanged(){return this._statusChanged}get connectionStatusChanged(){return this._connectionStatusChanged}get pendingInput(){return this._pendingInput}get iopubMessage(){return this._iopubMessage}get unhandledMessage(){return this._unhandledMessage}get anyMessage(){return this._anyMessage}get propertyChanged(){return this._propertyChanged}get id(){return this._id}get kernel(){return this._kernel}get path(){return this._path}get type(){return this._type}get name(){return this._name}get model(){return{id:this.id,kernel:this.kernel&&{id:this.kernel.id,name:this.kernel.name},path:this._path,type:this._type,name:this._name}}get isDisposed(){return this._isDisposed}update(e){const t=this.model;if(this._path=e.path,this._name=e.name,this._type=e.type,null===this._kernel&&null!==e.kernel||null!==this._kernel&&null===e.kernel||null!==this._kernel&&null!==e.kernel&&this._kernel.id!==e.kernel.id){null!==this._kernel&&this._kernel.dispose();const t=this._kernel||null;this.setupKernel(e.kernel);const n=this._kernel||null;this._kernelChanged.emit({name:"kernel",oldValue:t,newValue:n})}this._handleModelChange(t)}dispose(){if(!this.isDisposed){if(this._isDisposed=!0,this._disposed.emit(),this._kernel){this._kernel.dispose();const e=this._kernel;this._kernel=null;const t=this._kernel;this._kernelChanged.emit({name:"kernel",oldValue:e,newValue:t})}s.Signal.clearData(this)}}async setPath(e){if(this.isDisposed)throw new Error("Session is disposed");await this._patch({path:e})}async setName(e){if(this.isDisposed)throw new Error("Session is disposed");await this._patch({name:e})}async setType(e){if(this.isDisposed)throw new Error("Session is disposed");await this._patch({type:e})}async changeKernel(e){if(this.isDisposed)throw new Error("Session is disposed");return await this._patch({kernel:e}),this.kernel}async shutdown(){if(this.isDisposed)throw new Error("Session is disposed");await r.shutdownSession(this.id,this.serverSettings),this.dispose()}setupKernel(e){if(null===e)return void(this._kernel=null);const t=this._connectToKernel(Object.assign(Object.assign({},this._kernelConnectionOptions),{model:e,username:this._username,clientId:this._clientId,serverSettings:this.serverSettings}));this._kernel=t,t.statusChanged.connect(this.onKernelStatus,this),t.connectionStatusChanged.connect(this.onKernelConnectionStatus,this),t.pendingInput.connect(this.onPendingInput,this),t.unhandledMessage.connect(this.onUnhandledMessage,this),t.iopubMessage.connect(this.onIOPubMessage,this),t.anyMessage.connect(this.onAnyMessage,this)}onKernelStatus(e,t){this._statusChanged.emit(t)}onKernelConnectionStatus(e,t){this._connectionStatusChanged.emit(t)}onPendingInput(e,t){this._pendingInput.emit(t)}onIOPubMessage(e,t){this._iopubMessage.emit(t)}onUnhandledMessage(e,t){this._unhandledMessage.emit(t)}onAnyMessage(e,t){this._anyMessage.emit(t)}async _patch(e){const t=await r.updateSession(Object.assign(Object.assign({},e),{id:this._id}),this.serverSettings);return this.update(t),t}_handleModelChange(e){e.name!==this._name&&this._propertyChanged.emit("name"),e.type!==this._type&&this._propertyChanged.emit("type"),e.path!==this._path&&this._propertyChanged.emit("path")}}},41874:function(e,t,n){"use strict";var s=this&&this.__createBinding||(Object.create?function(e,t,n,s){void 0===s&&(s=n),Object.defineProperty(e,s,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,s){void 0===s&&(s=n),e[s]=t[n]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),r=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&s(t,e,n);return i(t,e),t},o=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||s(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),t.SessionAPI=t.Session=void 0;const a=r(n(11372));t.Session=a;const c=r(n(56807));t.SessionAPI=c,o(n(57847),t)},57847:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SessionManager=void 0;const s=n(35259),i=n(23114),r=n(4016),o=n(28477),a=n(50591),c=n(35410),u=n(56807);class l extends a.BaseManager{constructor(e){var t;super(e),this._isReady=!1,this._sessionConnections=new Set,this._models=new Map,this._runningChanged=new r.Signal(this),this._connectionFailure=new r.Signal(this),this._connectToKernel=e=>this._kernelManager.connectTo(e),this._kernelManager=e.kernelManager,this._pollModels=new i.Poll({auto:!1,factory:()=>this.requestRunning(),frequency:{interval:1e4,backoff:!0,max:3e5},name:"@jupyterlab/services:SessionManager#models",standby:null!==(t=e.standby)&&void 0!==t?t:"when-hidden"}),this._ready=(async()=>{await this._pollModels.start(),await this._pollModels.tick,await this._kernelManager.ready,this._isReady=!0})()}get isReady(){return this._isReady}get ready(){return this._ready}get runningChanged(){return this._runningChanged}get connectionFailure(){return this._connectionFailure}dispose(){this.isDisposed||(this._models.clear(),this._sessionConnections.forEach((e=>e.dispose())),this._pollModels.dispose(),super.dispose())}connectTo(e){const t=new c.SessionConnection(Object.assign(Object.assign({},e),{connectToKernel:this._connectToKernel,serverSettings:this.serverSettings}));return this._onStarted(t),this._models.has(e.model.id)||this.refreshRunning().catch((()=>{})),t}running(){return s.iter([...this._models.values()])}async refreshRunning(){await this._pollModels.refresh(),await this._pollModels.tick}async startNew(e,t={}){const n=await u.startSession(e,this.serverSettings);return await this.refreshRunning(),this.connectTo(Object.assign(Object.assign({},t),{model:n}))}async shutdown(e){await u.shutdownSession(e,this.serverSettings),await this.refreshRunning()}async shutdownAll(){await this.refreshRunning(),await Promise.all([...this._models.keys()].map((e=>u.shutdownSession(e,this.serverSettings)))),await this.refreshRunning()}async stopIfNeeded(e){try{const t=(await u.listRunning(this.serverSettings)).filter((t=>t.path===e));if(1===t.length){const e=t[0].id;await this.shutdown(e)}}catch(t){}}async findById(e){return this._models.has(e)||await this.refreshRunning(),this._models.get(e)}async findByPath(e){for(const t of this._models.values())if(t.path===e)return t;await this.refreshRunning();for(const t of this._models.values())if(t.path===e)return t}async requestRunning(){var e,t;let n;try{n=await u.listRunning(this.serverSettings)}catch(i){throw(i instanceof o.ServerConnection.NetworkError||503===(null===(e=i.response)||void 0===e?void 0:e.status)||424===(null===(t=i.response)||void 0===t?void 0:t.status))&&this._connectionFailure.emit(i),i}this.isDisposed||this._models.size===n.length&&s.every(n,(e=>{var t,n,s,i;const r=this._models.get(e.id);return!!r&&((null===(t=r.kernel)||void 0===t?void 0:t.id)===(null===(n=e.kernel)||void 0===n?void 0:n.id)&&(null===(s=r.kernel)||void 0===s?void 0:s.name)===(null===(i=e.kernel)||void 0===i?void 0:i.name)&&r.name===e.name&&r.path===e.path&&r.type===e.type)}))||(this._models=new Map(n.map((e=>[e.id,e]))),this._sessionConnections.forEach((e=>{this._models.has(e.id)?e.update(this._models.get(e.id)):e.dispose()})),this._runningChanged.emit(n))}_onStarted(e){this._sessionConnections.add(e),e.disposed.connect(this._onDisposed,this),e.propertyChanged.connect(this._onChanged,this),e.kernelChanged.connect(this._onChanged,this)}_onDisposed(e){this._sessionConnections.delete(e),this.refreshRunning().catch((()=>{}))}_onChanged(){this.refreshRunning().catch((()=>{}))}}t.SessionManager=l},56807:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.updateSession=t.startSession=t.getSessionModel=t.shutdownSession=t.getSessionUrl=t.listRunning=t.SESSION_SERVICE_URL=void 0;const s=n(28477),i=n(79622),r=n(29145);function o(e,n){return i.URLExt.join(e,t.SESSION_SERVICE_URL,n)}t.SESSION_SERVICE_URL="api/sessions",t.listRunning=async function(e=s.ServerConnection.makeSettings()){const n=i.URLExt.join(e.baseUrl,t.SESSION_SERVICE_URL),o=await s.ServerConnection.makeRequest(n,{},e);if(200!==o.status){throw await s.ServerConnection.ResponseError.create(o)}const a=await o.json();if(!Array.isArray(a))throw new Error("Invalid Session list");return a.forEach((e=>{r.updateLegacySessionModel(e),r.validateModel(e)})),a},t.getSessionUrl=o,t.shutdownSession=async function(e,t=s.ServerConnection.makeSettings()){var n;const i=o(t.baseUrl,e),r=await s.ServerConnection.makeRequest(i,{method:"DELETE"},t);if(404===r.status){const t=null!==(n=(await r.json()).message)&&void 0!==n?n:`The session "${e}"" does not exist on the server`;console.warn(t)}else{if(410===r.status)throw new s.ServerConnection.ResponseError(r,"The kernel was deleted but the session was not");if(204!==r.status){throw await s.ServerConnection.ResponseError.create(r)}}},t.getSessionModel=async function(e,t=s.ServerConnection.makeSettings()){const n=o(t.baseUrl,e),i=await s.ServerConnection.makeRequest(n,{},t);if(200!==i.status){throw await s.ServerConnection.ResponseError.create(i)}const a=await i.json();return r.updateLegacySessionModel(a),r.validateModel(a),a},t.startSession=async function(e,n=s.ServerConnection.makeSettings()){const o=i.URLExt.join(n.baseUrl,t.SESSION_SERVICE_URL),a={method:"POST",body:JSON.stringify(e)},c=await s.ServerConnection.makeRequest(o,a,n);if(201!==c.status){throw await s.ServerConnection.ResponseError.create(c)}const u=await c.json();return r.updateLegacySessionModel(u),r.validateModel(u),u},t.updateSession=async function(e,t=s.ServerConnection.makeSettings()){const n=o(t.baseUrl,e.id),i={method:"PATCH",body:JSON.stringify(e)},a=await s.ServerConnection.makeRequest(n,i,t);if(200!==a.status){throw await s.ServerConnection.ResponseError.create(a)}const c=await a.json();return r.updateLegacySessionModel(c),r.validateModel(c),c}},11372:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0})},29145:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.validateModels=t.updateLegacySessionModel=t.validateModel=void 0;const s=n(96512),i=n(46901);function r(e){i.validateProperty(e,"id","string"),i.validateProperty(e,"type","string"),i.validateProperty(e,"name","string"),i.validateProperty(e,"path","string"),i.validateProperty(e,"kernel","object"),s.validateModel(e.kernel)}t.validateModel=r,t.updateLegacySessionModel=function(e){void 0===e.path&&void 0!==e.notebook&&(e.path=e.notebook.path,e.type="notebook",e.name="")},t.validateModels=function(e){if(!Array.isArray(e))throw new Error("Invalid session list");e.forEach((e=>r(e)))}},92726:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SettingManager=void 0;const s=n(79622),i=n(17266),r=n(28477);class o extends i.DataConnector{constructor(e={}){var t;super(),this.serverSettings=null!==(t=e.serverSettings)&&void 0!==t?t:r.ServerConnection.makeSettings()}async fetch(e){if(!e)throw new Error("Plugin `id` parameter is required for settings fetch.");const{serverSettings:t}=this,{baseUrl:n,appUrl:s}=t,{makeRequest:i,ResponseError:o}=r.ServerConnection,c=n+s,u=a.url(c,e),l=await i(u,{},t);if(200!==l.status){throw await o.create(l)}return l.json()}async list(){var e,t;const{serverSettings:n}=this,{baseUrl:s,appUrl:i}=n,{makeRequest:o,ResponseError:c}=r.ServerConnection,u=s+i,l=a.url(u,""),h=await o(l,{},n);if(200!==h.status)throw new c(h);const d=await h.json(),p=null!==(t=null===(e=null===d||void 0===d?void 0:d.settings)||void 0===e?void 0:e.map((e=>(e.data={composite:{},user:{}},e))))&&void 0!==t?t:[];return{ids:p.map((e=>e.id)),values:p}}async save(e,t){const{serverSettings:n}=this,{baseUrl:s,appUrl:i}=n,{makeRequest:o,ResponseError:c}=r.ServerConnection,u=s+i,l=a.url(u,e),h={body:JSON.stringify({raw:t}),method:"PUT"},d=await o(l,h,n);if(204!==d.status)throw new c(d)}}var a;t.SettingManager=o,function(e){e.url=function(e,t){return s.URLExt.join(e,"api/settings",t)}}(a||(a={}))},12447:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=WebSocket},71146:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TerminalConnection=void 0;const s=n(79622),i=n(95082),r=n(4016),o=n(76240),a=n(43286);class c{constructor(e){var t;this._createSocket=()=>{this._errorIfDisposed(),this._clearSocket(),this._updateConnectionStatus("connecting");const e=this._name,t=this.serverSettings;let n=s.URLExt.join(t.wsUrl,"terminals","websocket",encodeURIComponent(e));const i=t.token;t.appendToken&&""!==i&&(n+=`?token=${encodeURIComponent(i)}`),this._ws=new t.WebSocket(n),this._ws.onmessage=this._onWSMessage,this._ws.onclose=this._onWSClose,this._ws.onerror=this._onWSClose},this._onWSMessage=e=>{if(this._isDisposed)return;const t=JSON.parse(e.data);"disconnect"===t[0]&&this.dispose(),"connecting"!==this._connectionStatus?this._messageReceived.emit({type:t[0],content:t.slice(1)}):"setup"===t[0]&&this._updateConnectionStatus("connected")},this._onWSClose=e=>{console.warn(`Terminal websocket closed: ${e.code}`),this.isDisposed||this._reconnect()},this._connectionStatus="connecting",this._connectionStatusChanged=new r.Signal(this),this._isDisposed=!1,this._disposed=new r.Signal(this),this._messageReceived=new r.Signal(this),this._reconnectTimeout=null,this._ws=null,this._noOp=()=>{},this._reconnectLimit=7,this._reconnectAttempt=0,this._pendingMessages=[],this._name=e.model.name,this.serverSettings=null!==(t=e.serverSettings)&&void 0!==t?t:o.ServerConnection.makeSettings(),this._createSocket()}get disposed(){return this._disposed}get messageReceived(){return this._messageReceived}get name(){return this._name}get model(){return{name:this._name}}get isDisposed(){return this._isDisposed}dispose(){this._isDisposed||(this._isDisposed=!0,this._disposed.emit(),this._updateConnectionStatus("disconnected"),this._clearSocket(),r.Signal.clearData(this))}send(e){this._sendMessage(e)}_sendMessage(e,t=!0){if(!this._isDisposed&&e.content)if("connected"===this.connectionStatus&&this._ws){const t=[e.type,...e.content];this._ws.send(JSON.stringify(t))}else{if(!t)throw new Error(`Could not send message: ${JSON.stringify(e)}`);this._pendingMessages.push(e)}}_sendPending(){for(;"connected"===this.connectionStatus&&this._pendingMessages.length>0;)this._sendMessage(this._pendingMessages[0],!1),this._pendingMessages.shift()}reconnect(){this._errorIfDisposed();const e=new i.PromiseDelegate,t=(n,s)=>{"connected"===s?(e.resolve(),this.connectionStatusChanged.disconnect(t,this)):"disconnected"===s&&(e.reject(new Error("Terminal connection disconnected")),this.connectionStatusChanged.disconnect(t,this))};return this.connectionStatusChanged.connect(t,this),this._reconnectAttempt=0,this._reconnect(),e.promise}_reconnect(){if(this._errorIfDisposed(),clearTimeout(this._reconnectTimeout),this._reconnectAttempt<this._reconnectLimit){this._updateConnectionStatus("connecting");const e=u.getRandomIntInclusive(0,1e3*(Math.pow(2,this._reconnectAttempt)-1));console.error(`Connection lost, reconnecting in ${Math.floor(e/1e3)} seconds.`),this._reconnectTimeout=setTimeout(this._createSocket,e),this._reconnectAttempt+=1}else this._updateConnectionStatus("disconnected");this._clearSocket()}_clearSocket(){null!==this._ws&&(this._ws.onopen=this._noOp,this._ws.onclose=this._noOp,this._ws.onerror=this._noOp,this._ws.onmessage=this._noOp,this._ws.close(),this._ws=null)}async shutdown(){await a.shutdownTerminal(this.name,this.serverSettings),this.dispose()}clone(){return new c(this)}_updateConnectionStatus(e){this._connectionStatus!==e&&(this._connectionStatus=e,"connecting"!==e&&(this._reconnectAttempt=0,clearTimeout(this._reconnectTimeout)),"connected"===e&&this._sendPending(),this._connectionStatusChanged.emit(e))}_errorIfDisposed(){if(this.isDisposed)throw new Error("Terminal connection is disposed")}get connectionStatusChanged(){return this._connectionStatusChanged}get connectionStatus(){return this._connectionStatus}}var u;t.TerminalConnection=c,function(e){e.getTermUrl=function(e,t){return s.URLExt.join(e,a.TERMINAL_SERVICE_URL,encodeURIComponent(t))},e.getRandomIntInclusive=function(e,t){return e=Math.ceil(e),t=Math.floor(t),Math.floor(Math.random()*(t-e+1))+e}}(u||(u={}))},93247:function(e,t,n){"use strict";var s=this&&this.__createBinding||(Object.create?function(e,t,n,s){void 0===s&&(s=n),Object.defineProperty(e,s,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,s){void 0===s&&(s=n),e[s]=t[n]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),r=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&s(t,e,n);return i(t,e),t},o=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||s(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),t.TerminalAPI=t.Terminal=void 0;const a=r(n(58353));t.Terminal=a;const c=r(n(43286));t.TerminalAPI=c,o(n(61546),t)},61546:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TerminalManager=void 0;const s=n(35259),i=n(23114),r=n(4016),o=n(76240),a=n(50591),c=n(43286),u=n(71146);class l extends a.BaseManager{constructor(e={}){var t;if(super(e),this._isReady=!1,this._names=[],this._terminalConnections=new Set,this._runningChanged=new r.Signal(this),this._connectionFailure=new r.Signal(this),!this.isAvailable())return this._ready=Promise.reject("Terminals unavailable"),void this._ready.catch((e=>{}));this._pollModels=new i.Poll({auto:!1,factory:()=>this.requestRunning(),frequency:{interval:1e4,backoff:!0,max:3e5},name:"@jupyterlab/services:TerminalManager#models",standby:null!==(t=e.standby)&&void 0!==t?t:"when-hidden"}),this._ready=(async()=>{await this._pollModels.start(),await this._pollModels.tick,this._isReady=!0})()}get isReady(){return this._isReady}get ready(){return this._ready}get runningChanged(){return this._runningChanged}get connectionFailure(){return this._connectionFailure}dispose(){this.isDisposed||(this._names.length=0,this._terminalConnections.forEach((e=>e.dispose())),this._pollModels.dispose(),super.dispose())}isAvailable(){return c.isAvailable()}connectTo(e){const t=new u.TerminalConnection(Object.assign(Object.assign({},e),{serverSettings:this.serverSettings}));return this._onStarted(t),this._names.includes(e.model.name)||this.refreshRunning().catch((()=>{})),t}running(){return s.iter(this._models)}async refreshRunning(){await this._pollModels.refresh(),await this._pollModels.tick}async startNew(e){const t=await c.startNew(this.serverSettings,null===e||void 0===e?void 0:e.name,null===e||void 0===e?void 0:e.cwd);return await this.refreshRunning(),this.connectTo({model:t})}async shutdown(e){await c.shutdownTerminal(e,this.serverSettings),await this.refreshRunning()}async shutdownAll(){await this.refreshRunning(),await Promise.all(this._names.map((e=>c.shutdownTerminal(e,this.serverSettings)))),await this.refreshRunning()}async requestRunning(){var e,t;let n;try{n=await c.listRunning(this.serverSettings)}catch(i){throw(i instanceof o.ServerConnection.NetworkError||503===(null===(e=i.response)||void 0===e?void 0:e.status)||424===(null===(t=i.response)||void 0===t?void 0:t.status))&&this._connectionFailure.emit(i),i}if(this.isDisposed)return;const s=n.map((({name:e})=>e)).sort();s!==this._names&&(this._names=s,this._terminalConnections.forEach((e=>{s.includes(e.name)||e.dispose()})),this._runningChanged.emit(this._models))}_onStarted(e){this._terminalConnections.add(e),e.disposed.connect(this._onDisposed,this)}_onDisposed(e){this._terminalConnections.delete(e),this.refreshRunning().catch((()=>{}))}get _models(){return this._names.map((e=>({name:e})))}}t.TerminalManager=l},43286:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.shutdownTerminal=t.listRunning=t.startNew=t.isAvailable=t.TERMINAL_SERVICE_URL=void 0;const s=n(79622),i=n(28477);function r(){return"true"===String(s.PageConfig.getOption("terminalsAvailable")).toLowerCase()}var o;t.TERMINAL_SERVICE_URL="api/terminals",t.isAvailable=r,t.startNew=async function(e=i.ServerConnection.makeSettings(),n,r){o.errorIfNotAvailable();const a=s.URLExt.join(e.baseUrl,t.TERMINAL_SERVICE_URL),c={method:"POST",body:JSON.stringify({name:n,cwd:r})},u=await i.ServerConnection.makeRequest(a,c,e);if(200!==u.status){throw await i.ServerConnection.ResponseError.create(u)}return await u.json()},t.listRunning=async function(e=i.ServerConnection.makeSettings()){o.errorIfNotAvailable();const n=s.URLExt.join(e.baseUrl,t.TERMINAL_SERVICE_URL),r=await i.ServerConnection.makeRequest(n,{},e);if(200!==r.status){throw await i.ServerConnection.ResponseError.create(r)}const a=await r.json();if(!Array.isArray(a))throw new Error("Invalid terminal list");return a},t.shutdownTerminal=async function(e,n=i.ServerConnection.makeSettings()){var r;o.errorIfNotAvailable();const a=s.URLExt.join(n.baseUrl,t.TERMINAL_SERVICE_URL,e),c=await i.ServerConnection.makeRequest(a,{method:"DELETE"},n);if(404===c.status){const t=null!==(r=(await c.json()).message)&&void 0!==r?r:`The terminal session "${e}"" does not exist on the server`;console.warn(t)}else if(204!==c.status){throw await i.ServerConnection.ResponseError.create(c)}},function(e){e.errorIfNotAvailable=function(){if(!r())throw new Error("Terminals Unavailable")}}(o||(o={}))},58353:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isAvailable=void 0;const s=n(43286);Object.defineProperty(t,"isAvailable",{enumerable:!0,get:function(){return s.isAvailable}})},46901:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.validateProperty=void 0,t.validateProperty=function(e,t,n,s=[]){if(!e.hasOwnProperty(t))throw Error(`Missing property '${t}'`);const i=e[t];if(void 0!==n){let e=!0;switch(n){case"array":e=Array.isArray(i);break;case"object":e="undefined"!==typeof i;break;default:e=typeof i===n}if(!e)throw new Error(`Property '${t}' is not of type '${n}'`);if(s.length>0){let e=!0;switch(n){case"string":case"number":case"boolean":e=s.includes(i);break;default:e=s.findIndex((e=>e===i))>=0}if(!e)throw new Error(`Property '${t}' is not one of the valid values ${JSON.stringify(s)}`)}}}},45399:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.WorkspaceManager=void 0;const s=n(79622),i=n(17266),r=n(28477);class o extends i.DataConnector{constructor(e={}){var t;super(),this.serverSettings=null!==(t=e.serverSettings)&&void 0!==t?t:r.ServerConnection.makeSettings()}async fetch(e){const{serverSettings:t}=this,{baseUrl:n,appUrl:s}=t,{makeRequest:i,ResponseError:o}=r.ServerConnection,c=n+s,u=a.url(c,e),l=await i(u,{},t);if(200!==l.status){throw await o.create(l)}return l.json()}async list(){const{serverSettings:e}=this,{baseUrl:t,appUrl:n}=e,{makeRequest:s,ResponseError:i}=r.ServerConnection,o=t+n,c=a.url(o,""),u=await s(c,{},e);if(200!==u.status){throw await i.create(u)}return(await u.json()).workspaces}async remove(e){const{serverSettings:t}=this,{baseUrl:n,appUrl:s}=t,{makeRequest:i,ResponseError:o}=r.ServerConnection,c=n+s,u=a.url(c,e),l=await i(u,{method:"DELETE"},t);if(204!==l.status){throw await o.create(l)}}async save(e,t){const{serverSettings:n}=this,{baseUrl:s,appUrl:i}=n,{makeRequest:o,ResponseError:c}=r.ServerConnection,u=s+i,l=a.url(u,e),h={body:JSON.stringify(t),method:"PUT"},d=await o(l,h,n);if(204!==d.status){throw await c.create(d)}}}var a;t.WorkspaceManager=o,function(e){e.url=function(e,t){return s.URLExt.join(e,"api/workspaces",t)}}(a||(a={}))},89525:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.DataConnector=void 0;t.DataConnector=class{async list(e){throw new Error("DataConnector#list method has not been implemented.")}async remove(e){throw new Error("DataConnector#remove method has not been implemented.")}async save(e,t){throw new Error("DataConnector#save method has not been implemented.")}}},17266:function(e,t,n){"use strict";var s=this&&this.__createBinding||(Object.create?function(e,t,n,s){void 0===s&&(s=n),Object.defineProperty(e,s,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,s){void 0===s&&(s=n),e[s]=t[n]}),i=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||s(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),i(n(89525),t),i(n(14623),t),i(n(51156),t),i(n(64962),t),i(n(7263),t)},14623:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0})},51156:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.RestorablePool=void 0;const s=n(95082),i=n(39770),r=n(4016);var o;t.RestorablePool=class{constructor(e){this._added=new r.Signal(this),this._current=null,this._currentChanged=new r.Signal(this),this._hasRestored=!1,this._isDisposed=!1,this._objects=new Set,this._restore=null,this._restored=new s.PromiseDelegate,this._updated=new r.Signal(this),this.namespace=e.namespace}get added(){return this._added}get current(){return this._current}set current(e){this._current!==e&&null!==e&&this._objects.has(e)&&(this._current=e,this._currentChanged.emit(this._current))}get currentChanged(){return this._currentChanged}get isDisposed(){return this._isDisposed}get restored(){return this._restored.promise}get size(){return this._objects.size}get updated(){return this._updated}async add(e){var t,n;if(e.isDisposed){const t="A disposed object cannot be added.";throw console.warn(t,e),new Error(t)}if(this._objects.has(e)){const t="This object already exists in the pool.";throw console.warn(t,e),new Error(t)}if(this._objects.add(e),e.disposed.connect(this._onInstanceDisposed,this),!o.injectedProperty.get(e)){if(this._restore){const{connector:s}=this._restore,i=this._restore.name(e);if(i){const r=`${this.namespace}:${i}`,a=null===(n=(t=this._restore).args)||void 0===n?void 0:n.call(t,e);o.nameProperty.set(e,r),await s.save(r,{data:a})}}this._added.emit(e)}}dispose(){this.isDisposed||(this._current=null,this._isDisposed=!0,this._objects.clear(),r.Signal.clearData(this))}find(e){const t=this._objects.values();for(const n of t)if(e(n))return n}forEach(e){this._objects.forEach(e)}filter(e){const t=[];return this.forEach((n=>{e(n)&&t.push(n)})),t}inject(e){return o.injectedProperty.set(e,!0),this.add(e)}has(e){return this._objects.has(e)}async restore(e){if(this._hasRestored)throw new Error("This pool has already been restored.");this._hasRestored=!0;const{command:t,connector:n,registry:s,when:i}=e,r=this.namespace,o=i?[n.list(r)].concat(i):[n.list(r)];this._restore=e;const[a]=await Promise.all(o),c=await Promise.all(a.ids.map((async(e,i)=>{const r=a.values[i],o=r&&r.data;return void 0===o?n.remove(e):s.execute(t,o).catch((()=>n.remove(e)))})));return this._restored.resolve(),c}async save(e){var t,n;const s=o.injectedProperty.get(e);if(!this._restore||!this.has(e)||s)return;const{connector:i}=this._restore,r=this._restore.name(e),a=o.nameProperty.get(e),c=r?`${this.namespace}:${r}`:"";if(a&&a!==c&&await i.remove(a),o.nameProperty.set(e,c),c){const s=null===(n=(t=this._restore).args)||void 0===n?void 0:n.call(t,e);await i.save(c,{data:s})}a!==c&&this._updated.emit(e)}_onInstanceDisposed(e){if(this._objects.delete(e),e===this._current&&(this._current=null,this._currentChanged.emit(this._current)),o.injectedProperty.get(e))return;if(!this._restore)return;const{connector:t}=this._restore,n=o.nameProperty.get(e);n&&t.remove(n)}},function(e){e.injectedProperty=new i.AttachedProperty({name:"injected",create:()=>!1}),e.nameProperty=new i.AttachedProperty({name:"name",create:()=>""})}(o||(o={}))},64962:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.StateDB=void 0;const s=n(4016);class i{constructor(e={}){this._changed=new s.Signal(this);const{connector:t,transform:n}=e;this._connector=t||new i.Connector,this._ready=n?n.then((e=>{const{contents:t,type:n}=e;switch(n){case"cancel":default:return;case"clear":return this._clear();case"merge":return this._merge(t||{});case"overwrite":return this._overwrite(t||{})}})):Promise.resolve(void 0)}get changed(){return this._changed}async clear(){await this._ready,await this._clear()}async fetch(e){return await this._ready,this._fetch(e)}async list(e){return await this._ready,this._list(e)}async remove(e){await this._ready,await this._remove(e),this._changed.emit({id:e,type:"remove"})}async save(e,t){await this._ready,await this._save(e,t),this._changed.emit({id:e,type:"save"})}async toJSON(){await this._ready;const{ids:e,values:t}=await this._list();return t.reduce(((t,n,s)=>(t[e[s]]=n,t)),{})}async _clear(){await Promise.all((await this._list()).ids.map((e=>this._remove(e))))}async _fetch(e){const t=await this._connector.fetch(e);if(t)return JSON.parse(t).v}async _list(e=""){const{ids:t,values:n}=await this._connector.list(e);return{ids:t,values:n.map((e=>JSON.parse(e).v))}}async _merge(e){await Promise.all(Object.keys(e).map((t=>e[t]&&this._save(t,e[t]))))}async _overwrite(e){await this._clear(),await this._merge(e)}async _remove(e){return this._connector.remove(e)}async _save(e,t){return this._connector.save(e,JSON.stringify({v:t}))}}t.StateDB=i,function(e){e.Connector=class{constructor(){this._storage={}}async fetch(e){return this._storage[e]}async list(e=""){return Object.keys(this._storage).reduce(((t,n)=>(""!==e&&e!==n.split(":")[0]||(t.ids.push(n),t.values.push(this._storage[n])),t)),{ids:[],values:[]})}async remove(e){delete this._storage[e]}async save(e,t){this._storage[e]=t}}}(i=t.StateDB||(t.StateDB={}))},7263:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.IStateDB=void 0;const s=n(95082);t.IStateDB=new s.Token("@jupyterlab/coreutils:IStateDB")},35259:function(e,t,n){"use strict";var s;function i(e){return"function"===typeof e.iter?e.iter():new f(e)}function r(e){return new _(e)}function o(e){return new g(e)}function a(e){return new m(e)}function c(e){return new v(e)}function u(e,t){for(var n,s=0,r=i(e);void 0!==(n=r.next());)if(!1===t(n,s++))return}function l(e,t){for(var n,s=0,r=i(e);void 0!==(n=r.next());)if(!t(n,s++))return!1;return!0}function h(e,t){for(var n,s=0,r=i(e);void 0!==(n=r.next());)if(t(n,s++))return!0;return!1}function d(e){for(var t,n=0,s=[],r=i(e);void 0!==(t=r.next());)s[n++]=t;return s}function p(e){for(var t,n=i(e),s={};void 0!==(t=n.next());)s[t[0]]=t[1];return s}n.r(t),n.d(t,{ArrayExt:function(){return s},ArrayIterator:function(){return f},ChainIterator:function(){return w},EmptyIterator:function(){return b},EnumerateIterator:function(){return M},FilterIterator:function(){return E},FnIterator:function(){return v},ItemIterator:function(){return m},KeyIterator:function(){return _},MapIterator:function(){return I},RangeIterator:function(){return A},RepeatIterator:function(){return q},RetroArrayIterator:function(){return V},StrideIterator:function(){return H},StringExt:function(){return z},TakeIterator:function(){return W},ValueIterator:function(){return g},ZipIterator:function(){return Y},chain:function(){return y},each:function(){return u},empty:function(){return S},enumerate:function(){return C},every:function(){return l},filter:function(){return k},find:function(){return O},findIndex:function(){return x},iter:function(){return i},iterFn:function(){return c},iterItems:function(){return a},iterKeys:function(){return r},iterValues:function(){return o},map:function(){return D},max:function(){return P},min:function(){return R},minmax:function(){return j},once:function(){return F},range:function(){return U},reduce:function(){return L},repeat:function(){return N},retro:function(){return K},some:function(){return h},stride:function(){return $},take:function(){return J},toArray:function(){return d},toObject:function(){return p},topologicSort:function(){return B},zip:function(){return G}}),function(e){function t(e,t,n,s){void 0===n&&(n=0),void 0===s&&(s=-1);var i,r=e.length;if(0===r)return-1;n=n<0?Math.max(0,n+r):Math.min(n,r-1),i=(s=s<0?Math.max(0,s+r):Math.min(s,r-1))<n?s+1+(r-n):s-n+1;for(var o=0;o<i;++o){var a=(n+o)%r;if(e[a]===t)return a}return-1}function n(e,t,n,s){void 0===n&&(n=-1),void 0===s&&(s=0);var i,r=e.length;if(0===r)return-1;i=(n=n<0?Math.max(0,n+r):Math.min(n,r-1))<(s=s<0?Math.max(0,s+r):Math.min(s,r-1))?n+1+(r-s):n-s+1;for(var o=0;o<i;++o){var a=(n-o+r)%r;if(e[a]===t)return a}return-1}function s(e,t,n,s){void 0===n&&(n=0),void 0===s&&(s=-1);var i,r=e.length;if(0===r)return-1;n=n<0?Math.max(0,n+r):Math.min(n,r-1),i=(s=s<0?Math.max(0,s+r):Math.min(s,r-1))<n?s+1+(r-n):s-n+1;for(var o=0;o<i;++o){var a=(n+o)%r;if(t(e[a],a))return a}return-1}function i(e,t,n,s){void 0===n&&(n=-1),void 0===s&&(s=0);var i,r=e.length;if(0===r)return-1;i=(n=n<0?Math.max(0,n+r):Math.min(n,r-1))<(s=s<0?Math.max(0,s+r):Math.min(s,r-1))?n+1+(r-s):n-s+1;for(var o=0;o<i;++o){var a=(n-o+r)%r;if(t(e[a],a))return a}return-1}function r(e,t,n){void 0===t&&(t=0),void 0===n&&(n=-1);var s=e.length;if(!(s<=1))for(t=t<0?Math.max(0,t+s):Math.min(t,s-1),n=n<0?Math.max(0,n+s):Math.min(n,s-1);t<n;){var i=e[t],r=e[n];e[t++]=r,e[n--]=i}}function o(e,t){var n=e.length;if(t<0&&(t+=n),!(t<0||t>=n)){for(var s=e[t],i=t+1;i<n;++i)e[i-1]=e[i];return e.length=n-1,s}}e.firstIndexOf=t,e.lastIndexOf=n,e.findFirstIndex=s,e.findLastIndex=i,e.findFirstValue=function(e,t,n,i){void 0===n&&(n=0),void 0===i&&(i=-1);var r=s(e,t,n,i);return-1!==r?e[r]:void 0},e.findLastValue=function(e,t,n,s){void 0===n&&(n=-1),void 0===s&&(s=0);var r=i(e,t,n,s);return-1!==r?e[r]:void 0},e.lowerBound=function(e,t,n,s,i){void 0===s&&(s=0),void 0===i&&(i=-1);var r=e.length;if(0===r)return 0;for(var o=s=s<0?Math.max(0,s+r):Math.min(s,r-1),a=(i=i<0?Math.max(0,i+r):Math.min(i,r-1))-s+1;a>0;){var c=a>>1,u=o+c;n(e[u],t)<0?(o=u+1,a-=c+1):a=c}return o},e.upperBound=function(e,t,n,s,i){void 0===s&&(s=0),void 0===i&&(i=-1);var r=e.length;if(0===r)return 0;for(var o=s=s<0?Math.max(0,s+r):Math.min(s,r-1),a=(i=i<0?Math.max(0,i+r):Math.min(i,r-1))-s+1;a>0;){var c=a>>1,u=o+c;n(e[u],t)>0?a=c:(o=u+1,a-=c+1)}return o},e.shallowEqual=function(e,t,n){if(e===t)return!0;if(e.length!==t.length)return!1;for(var s=0,i=e.length;s<i;++s)if(n?!n(e[s],t[s]):e[s]!==t[s])return!1;return!0},e.slice=function(e,t){void 0===t&&(t={});var n=t.start,s=t.stop,i=t.step;if(void 0===i&&(i=1),0===i)throw new Error("Slice `step` cannot be zero.");var r,o=e.length;void 0===n?n=i<0?o-1:0:n<0?n=Math.max(n+o,i<0?-1:0):n>=o&&(n=i<0?o-1:o),void 0===s?s=i<0?-1:o:s<0?s=Math.max(s+o,i<0?-1:0):s>=o&&(s=i<0?o-1:o),r=i<0&&s>=n||i>0&&n>=s?0:i<0?Math.floor((s-n+1)/i+1):Math.floor((s-n-1)/i+1);for(var a=[],c=0;c<r;++c)a[c]=e[n+c*i];return a},e.move=function(e,t,n){var s=e.length;if(!(s<=1)&&(t=t<0?Math.max(0,t+s):Math.min(t,s-1))!==(n=n<0?Math.max(0,n+s):Math.min(n,s-1))){for(var i=e[t],r=t<n?1:-1,o=t;o!==n;o+=r)e[o]=e[o+r];e[n]=i}},e.reverse=r,e.rotate=function(e,t,n,s){void 0===n&&(n=0),void 0===s&&(s=-1);var i=e.length;if(!(i<=1)&&!((n=n<0?Math.max(0,n+i):Math.min(n,i-1))>=(s=s<0?Math.max(0,s+i):Math.min(s,i-1)))){var o=s-n+1;if(t>0?t%=o:t<0&&(t=(t%o+o)%o),0!==t){var a=n+t;r(e,n,a-1),r(e,a,s),r(e,n,s)}}},e.fill=function(e,t,n,s){void 0===n&&(n=0),void 0===s&&(s=-1);var i=e.length;if(0!==i){var r;n=n<0?Math.max(0,n+i):Math.min(n,i-1),r=(s=s<0?Math.max(0,s+i):Math.min(s,i-1))<n?s+1+(i-n):s-n+1;for(var o=0;o<r;++o)e[(n+o)%i]=t}},e.insert=function(e,t,n){var s=e.length;t=t<0?Math.max(0,t+s):Math.min(t,s);for(var i=s;i>t;--i)e[i]=e[i-1];e[t]=n},e.removeAt=o,e.removeFirstOf=function(e,n,s,i){void 0===s&&(s=0),void 0===i&&(i=-1);var r=t(e,n,s,i);return-1!==r&&o(e,r),r},e.removeLastOf=function(e,t,s,i){void 0===s&&(s=-1),void 0===i&&(i=0);var r=n(e,t,s,i);return-1!==r&&o(e,r),r},e.removeAllOf=function(e,t,n,s){void 0===n&&(n=0),void 0===s&&(s=-1);var i=e.length;if(0===i)return 0;n=n<0?Math.max(0,n+i):Math.min(n,i-1),s=s<0?Math.max(0,s+i):Math.min(s,i-1);for(var r=0,o=0;o<i;++o)n<=s&&o>=n&&o<=s&&e[o]===t||s<n&&(o<=s||o>=n)&&e[o]===t?r++:r>0&&(e[o-r]=e[o]);return r>0&&(e.length=i-r),r},e.removeFirstWhere=function(e,t,n,i){var r;void 0===n&&(n=0),void 0===i&&(i=-1);var a=s(e,t,n,i);return-1!==a&&(r=o(e,a)),{index:a,value:r}},e.removeLastWhere=function(e,t,n,s){var r;void 0===n&&(n=-1),void 0===s&&(s=0);var a=i(e,t,n,s);return-1!==a&&(r=o(e,a)),{index:a,value:r}},e.removeAllWhere=function(e,t,n,s){void 0===n&&(n=0),void 0===s&&(s=-1);var i=e.length;if(0===i)return 0;n=n<0?Math.max(0,n+i):Math.min(n,i-1),s=s<0?Math.max(0,s+i):Math.min(s,i-1);for(var r=0,o=0;o<i;++o)n<=s&&o>=n&&o<=s&&t(e[o],o)||s<n&&(o<=s||o>=n)&&t(e[o],o)?r++:r>0&&(e[o-r]=e[o]);return r>0&&(e.length=i-r),r}}(s||(s={}));var f=function(){function e(e){this._index=0,this._source=e}return e.prototype.iter=function(){return this},e.prototype.clone=function(){var t=new e(this._source);return t._index=this._index,t},e.prototype.next=function(){if(!(this._index>=this._source.length))return this._source[this._index++]},e}(),_=function(){function e(e,t){void 0===t&&(t=Object.keys(e)),this._index=0,this._source=e,this._keys=t}return e.prototype.iter=function(){return this},e.prototype.clone=function(){var t=new e(this._source,this._keys);return t._index=this._index,t},e.prototype.next=function(){if(!(this._index>=this._keys.length)){var e=this._keys[this._index++];return e in this._source?e:this.next()}},e}(),g=function(){function e(e,t){void 0===t&&(t=Object.keys(e)),this._index=0,this._source=e,this._keys=t}return e.prototype.iter=function(){return this},e.prototype.clone=function(){var t=new e(this._source,this._keys);return t._index=this._index,t},e.prototype.next=function(){if(!(this._index>=this._keys.length)){var e=this._keys[this._index++];return e in this._source?this._source[e]:this.next()}},e}(),m=function(){function e(e,t){void 0===t&&(t=Object.keys(e)),this._index=0,this._source=e,this._keys=t}return e.prototype.iter=function(){return this},e.prototype.clone=function(){var t=new e(this._source,this._keys);return t._index=this._index,t},e.prototype.next=function(){if(!(this._index>=this._keys.length)){var e=this._keys[this._index++];return e in this._source?[e,this._source[e]]:this.next()}},e}(),v=function(){function e(e){this._fn=e}return e.prototype.iter=function(){return this},e.prototype.clone=function(){throw new Error("An `FnIterator` cannot be cloned.")},e.prototype.next=function(){return this._fn.call(void 0)},e}();function y(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return new w(i(e.map(i)))}var w=function(){function e(e){this._cloned=!1,this._source=e,this._active=void 0}return e.prototype.iter=function(){return this},e.prototype.clone=function(){var t=new e(this._source.clone());return t._active=this._active&&this._active.clone(),t._cloned=!0,this._cloned=!0,t},e.prototype.next=function(){if(void 0===this._active){var e=this._source.next();if(void 0===e)return;this._active=this._cloned?e.clone():e}var t=this._active.next();return void 0!==t?t:(this._active=void 0,this.next())},e}();function S(){return new b}var b=function(){function e(){}return e.prototype.iter=function(){return this},e.prototype.clone=function(){return new e},e.prototype.next=function(){},e}();function C(e,t){return void 0===t&&(t=0),new M(i(e),t)}var M=function(){function e(e,t){this._source=e,this._index=t}return e.prototype.iter=function(){return this},e.prototype.clone=function(){return new e(this._source.clone(),this._index)},e.prototype.next=function(){var e=this._source.next();if(void 0!==e)return[this._index++,e]},e}();function k(e,t){return new E(i(e),t)}var E=function(){function e(e,t){this._index=0,this._source=e,this._fn=t}return e.prototype.iter=function(){return this},e.prototype.clone=function(){var t=new e(this._source.clone(),this._fn);return t._index=this._index,t},e.prototype.next=function(){for(var e,t=this._fn,n=this._source;void 0!==(e=n.next());)if(t(e,this._index++))return e},e}();function O(e,t){for(var n,s=0,r=i(e);void 0!==(n=r.next());)if(t(n,s++))return n}function x(e,t){for(var n,s=0,r=i(e);void 0!==(n=r.next());)if(t(n,s++))return s-1;return-1}function R(e,t){var n=i(e),s=n.next();if(void 0!==s){for(var r=s;void 0!==(s=n.next());)t(s,r)<0&&(r=s);return r}}function P(e,t){var n=i(e),s=n.next();if(void 0!==s){for(var r=s;void 0!==(s=n.next());)t(s,r)>0&&(r=s);return r}}function j(e,t){var n=i(e),s=n.next();if(void 0!==s){for(var r=s,o=s;void 0!==(s=n.next());)t(s,r)<0?r=s:t(s,o)>0&&(o=s);return[r,o]}}function D(e,t){return new I(i(e),t)}var I=function(){function e(e,t){this._index=0,this._source=e,this._fn=t}return e.prototype.iter=function(){return this},e.prototype.clone=function(){var t=new e(this._source.clone(),this._fn);return t._index=this._index,t},e.prototype.next=function(){var e=this._source.next();if(void 0!==e)return this._fn.call(void 0,e,this._index++)},e}();function U(e,t,n){return void 0===t?new A(0,e,1):new A(e,t,void 0===n?1:n)}var T,A=function(){function e(e,t,n){this._index=0,this._start=e,this._stop=t,this._step=n,this._length=T.rangeLength(e,t,n)}return e.prototype.iter=function(){return this},e.prototype.clone=function(){var t=new e(this._start,this._stop,this._step);return t._index=this._index,t},e.prototype.next=function(){if(!(this._index>=this._length))return this._start+this._step*this._index++},e}();function L(e,t,n){var s=0,r=i(e),o=r.next();if(void 0===o&&void 0===n)throw new TypeError("Reduce of empty iterable with no initial value.");if(void 0===o)return n;var a,c,u=r.next();if(void 0===u&&void 0===n)return o;if(void 0===u)return t(n,o,s++);for(a=t(void 0===n?o:t(n,o,s++),u,s++);void 0!==(c=r.next());)a=t(a,c,s++);return a}function N(e,t){return new q(e,t)}function F(e){return new q(e,1)}!function(e){e.rangeLength=function(e,t,n){return 0===n?1/0:e>t&&n>0||e<t&&n<0?0:Math.ceil((t-e)/n)}}(T||(T={}));var q=function(){function e(e,t){this._value=e,this._count=t}return e.prototype.iter=function(){return this},e.prototype.clone=function(){return new e(this._value,this._count)},e.prototype.next=function(){if(!(this._count<=0))return this._count--,this._value},e}();function K(e){return"function"===typeof e.retro?e.retro():new V(e)}var V=function(){function e(e){this._source=e,this._index=e.length-1}return e.prototype.iter=function(){return this},e.prototype.clone=function(){var t=new e(this._source);return t._index=this._index,t},e.prototype.next=function(){if(!(this._index<0||this._index>=this._source.length))return this._source[this._index--]},e}();function B(e){var t=[],n=new Set,s=new Map;return u(e,(function(e){var t=e[0],n=e[1],i=s.get(n);i?i.push(t):s.set(n,[t])})),s.forEach((function(e,t){i(t)})),t;function i(e){if(!n.has(e)){n.add(e);var r=s.get(e);r&&r.forEach(i),t.push(e)}}}function $(e,t){return new H(i(e),t)}var z,H=function(){function e(e,t){this._source=e,this._step=t}return e.prototype.iter=function(){return this},e.prototype.clone=function(){return new e(this._source.clone(),this._step)},e.prototype.next=function(){for(var e=this._source.next(),t=this._step-1;t>0;--t)this._source.next();return e},e}();function J(e,t){return new W(i(e),t)}!function(e){function t(e,t,n){void 0===n&&(n=0);for(var s=new Array(t.length),i=0,r=n,o=t.length;i<o;++i,++r){if(-1===(r=e.indexOf(t[i],r)))return null;s[i]=r}return s}e.findIndices=t,e.matchSumOfSquares=function(e,n,s){void 0===s&&(s=0);var i=t(e,n,s);if(!i)return null;for(var r=0,o=0,a=i.length;o<a;++o){var c=i[o]-s;r+=c*c}return{score:r,indices:i}},e.matchSumOfDeltas=function(e,n,s){void 0===s&&(s=0);var i=t(e,n,s);if(!i)return null;for(var r=0,o=s-1,a=0,c=i.length;a<c;++a){var u=i[a];r+=u-o-1,o=u}return{score:r,indices:i}},e.highlight=function(e,t,n){for(var s=[],i=0,r=0,o=t.length;i<o;){for(var a=t[i],c=t[i];++i<o&&t[i]===c+1;)c++;r<a&&s.push(e.slice(r,a)),a<c+1&&s.push(n(e.slice(a,c+1))),r=c+1}return r<e.length&&s.push(e.slice(r)),s},e.cmp=function(e,t){return e<t?-1:e>t?1:0}}(z||(z={}));var W=function(){function e(e,t){this._source=e,this._count=t}return e.prototype.iter=function(){return this},e.prototype.clone=function(){return new e(this._source.clone(),this._count)},e.prototype.next=function(){if(!(this._count<=0)){var e=this._source.next();if(void 0!==e)return this._count--,e}},e}();function G(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return new Y(e.map(i))}var Y=function(){function e(e){this._source=e}return e.prototype.iter=function(){return this},e.prototype.clone=function(){return new e(this._source.map((function(e){return e.clone()})))},e.prototype.next=function(){for(var e=new Array(this._source.length),t=0,n=this._source.length;t<n;++t){var s=this._source[t].next();if(void 0===s)return;e[t]=s}return e},e}()},95082:function(e,t){!function(e){"use strict";e.JSONExt=void 0,function(e){function t(e){return null===e||"boolean"===typeof e||"number"===typeof e||"string"===typeof e}function n(e){return Array.isArray(e)}function s(e){return!t(e)&&!n(e)}function i(e,s){if(e===s)return!0;if(t(e)||t(s))return!1;var i=n(e),r=n(s);return i===r&&(i&&r?o(e,s):a(e,s))}function r(e){return t(e)?e:n(e)?c(e):u(e)}function o(e,t){if(e===t)return!0;if(e.length!==t.length)return!1;for(var n=0,s=e.length;n<s;++n)if(!i(e[n],t[n]))return!1;return!0}function a(e,t){if(e===t)return!0;for(var n in e)if(void 0!==e[n]&&!(n in t))return!1;for(var n in t)if(void 0!==t[n]&&!(n in e))return!1;for(var n in e){var s=e[n],r=t[n];if(void 0!==s||void 0!==r){if(void 0===s||void 0===r)return!1;if(!i(s,r))return!1}}return!0}function c(e){for(var t=new Array(e.length),n=0,s=e.length;n<s;++n)t[n]=r(e[n]);return t}function u(e){var t={};for(var n in e){var s=e[n];void 0!==s&&(t[n]=r(s))}return t}e.emptyObject=Object.freeze({}),e.emptyArray=Object.freeze([]),e.isPrimitive=t,e.isArray=n,e.isObject=s,e.deepEqual=i,e.deepCopy=r}(e.JSONExt||(e.JSONExt={}));var t=function(){function e(){this._types=[],this._values=[]}return e.prototype.types=function(){return this._types.slice()},e.prototype.hasData=function(e){return-1!==this._types.indexOf(e)},e.prototype.getData=function(e){var t=this._types.indexOf(e);return-1!==t?this._values[t]:void 0},e.prototype.setData=function(e,t){this.clearData(e),this._types.push(e),this._values.push(t)},e.prototype.clearData=function(e){var t=this._types.indexOf(e);-1!==t&&(this._types.splice(t,1),this._values.splice(t,1))},e.prototype.clear=function(){this._types.length=0,this._values.length=0},e}(),n=function(){function e(){var e=this;this.promise=new Promise((function(t,n){e._resolve=t,e._reject=n}))}return e.prototype.resolve=function(e){(0,this._resolve)(e)},e.prototype.reject=function(e){(0,this._reject)(e)},e}(),s=function(){function e(e){this.name=e,this._tokenStructuralPropertyT=null}return e}();function i(e){for(var t=0,n=0,s=e.length;n<s;++n)n%4===0&&(t=4294967295*Math.random()>>>0),e[n]=255&t,t>>>=8}function r(e){for(var t=new Uint8Array(16),n=new Array(256),s=0;s<16;++s)n[s]="0"+s.toString(16);for(s=16;s<256;++s)n[s]=s.toString(16);return function(){return e(t),t[6]=64|15&t[6],t[8]=128|63&t[8],n[t[0]]+n[t[1]]+n[t[2]]+n[t[3]]+"-"+n[t[4]]+n[t[5]]+"-"+n[t[6]]+n[t[7]]+"-"+n[t[8]]+n[t[9]]+"-"+n[t[10]]+n[t[11]]+n[t[12]]+n[t[13]]+n[t[14]]+n[t[15]]}}e.Random=void 0,(e.Random||(e.Random={})).getRandomValues=function(){var e="undefined"!==typeof window&&(window.crypto||window.msCrypto)||null;return e&&"function"===typeof e.getRandomValues?function(t){return e.getRandomValues(t)}:i}(),e.UUID=void 0,(e.UUID||(e.UUID={})).uuid4=r(e.Random.getRandomValues),e.MimeData=t,e.PromiseDelegate=n,e.Token=s,Object.defineProperty(e,"__esModule",{value:!0})}(t)},70725:function(e,t,n){"use strict";n.r(t),n.d(t,{DisposableDelegate:function(){return a},DisposableSet:function(){return u},ObservableDisposableDelegate:function(){return c},ObservableDisposableSet:function(){return l}});var s=n(35259),i=n(4016),r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},r(e,t)};function o(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}var a=function(){function e(e){this._fn=e}return Object.defineProperty(e.prototype,"isDisposed",{get:function(){return!this._fn},enumerable:!0,configurable:!0}),e.prototype.dispose=function(){if(this._fn){var e=this._fn;this._fn=null,e()}},e}(),c=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._disposed=new i.Signal(t),t}return o(t,e),Object.defineProperty(t.prototype,"disposed",{get:function(){return this._disposed},enumerable:!0,configurable:!0}),t.prototype.dispose=function(){this.isDisposed||(e.prototype.dispose.call(this),this._disposed.emit(void 0),i.Signal.clearData(this))},t}(a),u=function(){function e(){this._isDisposed=!1,this._items=new Set}return Object.defineProperty(e.prototype,"isDisposed",{get:function(){return this._isDisposed},enumerable:!0,configurable:!0}),e.prototype.dispose=function(){this._isDisposed||(this._isDisposed=!0,this._items.forEach((function(e){e.dispose()})),this._items.clear())},e.prototype.contains=function(e){return this._items.has(e)},e.prototype.add=function(e){this._items.add(e)},e.prototype.remove=function(e){this._items.delete(e)},e.prototype.clear=function(){this._items.clear()},e}();!function(e){e.from=function(t){var n=new e;return(0,s.each)(t,(function(e){n.add(e)})),n}}(u||(u={}));var l=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._disposed=new i.Signal(t),t}return o(t,e),Object.defineProperty(t.prototype,"disposed",{get:function(){return this._disposed},enumerable:!0,configurable:!0}),t.prototype.dispose=function(){this.isDisposed||(e.prototype.dispose.call(this),this._disposed.emit(void 0),i.Signal.clearData(this))},t}(u);!function(e){e.from=function(t){var n=new e;return(0,s.each)(t,(function(e){n.add(e)})),n}}(l||(l={}))},23114:function(e,t,n){"use strict";n.r(t),n.d(t,{Debouncer:function(){return _},Poll:function(){return p},RateLimiter:function(){return f},Throttler:function(){return g}});var s=n(95082),i=n(4016),r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},r(e,t)};function o(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}var a=function(){return a=Object.assign||function(e){for(var t,n=1,s=arguments.length;n<s;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},a.apply(this,arguments)};function c(e,t,n,s){return new(n||(n=Promise))((function(i,r){function o(e){try{c(s.next(e))}catch(t){r(t)}}function a(e){try{c(s.throw(e))}catch(t){r(t)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,a)}c((s=s.apply(e,t||[])).next())}))}function u(e,t){var n,s,i,r,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return r={next:a(0),throw:a(1),return:a(2)},"function"===typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function a(r){return function(a){return function(r){if(n)throw new TypeError("Generator is already executing.");for(;o;)try{if(n=1,s&&(i=2&r[0]?s.return:r[0]?s.throw||((i=s.return)&&i.call(s),0):s.next)&&!(i=i.call(s,r[1])).done)return i;switch(s=0,i&&(r=[2&r[0],i.value]),r[0]){case 0:case 1:i=r;break;case 4:return o.label++,{value:r[1],done:!1};case 5:o.label++,s=r[1],r=[0];continue;case 7:r=o.ops.pop(),o.trys.pop();continue;default:if(!(i=(i=o.trys).length>0&&i[i.length-1])&&(6===r[0]||2===r[0])){o=0;continue}if(3===r[0]&&(!i||r[1]>i[0]&&r[1]<i[3])){o.label=r[1];break}if(6===r[0]&&o.label<i[1]){o.label=i[1],i=r;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(r);break}i[2]&&o.ops.pop(),o.trys.pop();continue}r=t.call(e,o)}catch(a){r=[6,a],s=0}finally{n=i=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}([r,a])}}}var l,h="function"===typeof requestAnimationFrame?requestAnimationFrame:setImmediate,d="function"===typeof cancelAnimationFrame?cancelAnimationFrame:clearImmediate,p=function(){function e(e){var t=this;this._disposed=new i.Signal(this),this._tick=new s.PromiseDelegate,this._ticked=new i.Signal(this),this._timeout=-1,this._factory=e.factory,this._standby=e.standby||l.DEFAULT_STANDBY,this._state=a(a({},l.DEFAULT_STATE),{timestamp:(new Date).getTime()});var n=e.frequency||{},r=Math.max(n.interval||0,n.max||0,l.DEFAULT_FREQUENCY.max);this.frequency=a(a(a({},l.DEFAULT_FREQUENCY),n),{max:r}),this.name=e.name||l.DEFAULT_NAME,"auto"in e&&!e.auto||h((function(){t.start()}))}return Object.defineProperty(e.prototype,"disposed",{get:function(){return this._disposed},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"frequency",{get:function(){return this._frequency},set:function(t){if(!this.isDisposed&&!s.JSONExt.deepEqual(t,this.frequency||{})){var n=t.backoff,i=t.interval,r=t.max;if(i=Math.round(i),r=Math.round(r),"number"===typeof n&&n<1)throw new Error("Poll backoff growth factor must be at least 1");if((i<0||i>r)&&i!==e.NEVER)throw new Error("Poll interval must be between 0 and max");if(r>e.MAX_INTERVAL&&r!==e.NEVER)throw new Error("Max interval must be less than "+e.MAX_INTERVAL);this._frequency={backoff:n,interval:i,max:r}}},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isDisposed",{get:function(){return"disposed"===this.state.phase},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"standby",{get:function(){return this._standby},set:function(e){this.isDisposed||this.standby===e||(this._standby=e)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"state",{get:function(){return this._state},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"tick",{get:function(){return this._tick.promise},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"ticked",{get:function(){return this._ticked},enumerable:!0,configurable:!0}),e.prototype.dispose=function(){this.isDisposed||(this._state=a(a({},l.DISPOSED_STATE),{timestamp:(new Date).getTime()}),this._tick.promise.catch((function(e){})),this._tick.reject(new Error("Poll ("+this.name+") is disposed.")),this._disposed.emit(void 0),i.Signal.clearData(this))},e.prototype.refresh=function(){return this.schedule({cancel:function(e){return"refreshed"===e.phase},interval:e.IMMEDIATE,phase:"refreshed"})},e.prototype.schedule=function(t){return void 0===t&&(t={}),c(this,void 0,void 0,(function(){var n,i,r,o,c,l=this;return u(this,(function(u){switch(u.label){case 0:return this.isDisposed||t.cancel&&t.cancel(this.state)?[2]:(n=this.state,i=this._tick,r=new s.PromiseDelegate,o=a({interval:this.frequency.interval,payload:null,phase:"standby",timestamp:(new Date).getTime()},t),this._state=o,this._tick=r,n.interval===e.IMMEDIATE?d(this._timeout):clearTimeout(this._timeout),this._ticked.emit(this.state),i.resolve(this),[4,i.promise]);case 1:return u.sent(),c=function(){l.isDisposed||l.tick!==r.promise||l._execute()},this._timeout=o.interval===e.IMMEDIATE?h(c):o.interval===e.NEVER?-1:setTimeout(c,o.interval),[2]}}))}))},e.prototype.start=function(){return this.schedule({cancel:function(e){var t=e.phase;return"constructed"!==t&&"standby"!==t&&"stopped"!==t},interval:e.IMMEDIATE,phase:"started"})},e.prototype.stop=function(){return this.schedule({cancel:function(e){return"stopped"===e.phase},interval:e.NEVER,phase:"stopped"})},e.prototype._execute=function(){var e=this,t="function"===typeof this.standby?this.standby():this.standby;if(t="never"!==t&&("when-hidden"===t?!("undefined"===typeof document||!document||!document.hidden):t))this.schedule();else{var n=this.tick;this._factory(this.state).then((function(t){e.isDisposed||e.tick!==n||e.schedule({payload:t,phase:"rejected"===e.state.phase?"reconnected":"resolved"})})).catch((function(t){e.isDisposed||e.tick!==n||e.schedule({interval:l.sleep(e.frequency,e.state),payload:t,phase:"rejected"})}))}},e}();!function(e){e.IMMEDIATE=0,e.MAX_INTERVAL=2147483647,e.NEVER=1/0}(p||(p={})),function(e){e.DEFAULT_BACKOFF=3,e.DEFAULT_FREQUENCY={backoff:!0,interval:1e3,max:3e4},e.DEFAULT_NAME="unknown",e.DEFAULT_STANDBY="when-hidden",e.DEFAULT_STATE={interval:p.NEVER,payload:null,phase:"constructed",timestamp:new Date(0).getTime()},e.DISPOSED_STATE={interval:p.NEVER,payload:null,phase:"disposed",timestamp:new Date(0).getTime()},e.sleep=function(t,n){var s=t.backoff,i=t.interval,r=t.max;if(i===p.NEVER)return i;var o=!0===s?e.DEFAULT_BACKOFF:!1===s?1:s,a=function(e,t){return e=Math.ceil(e),t=Math.floor(t),Math.floor(Math.random()*(t-e+1))+e}(i,n.interval*o);return Math.min(r,a)}}(l||(l={}));var f=function(){function e(e,t){var n=this;void 0===t&&(t=500),this.payload=null,this.limit=t,this.poll=new p({auto:!1,factory:function(){return c(n,void 0,void 0,(function(){return u(this,(function(t){switch(t.label){case 0:return[4,e()];case 1:return[2,t.sent()]}}))}))},frequency:{backoff:!1,interval:p.NEVER,max:p.NEVER},standby:"never"}),this.payload=new s.PromiseDelegate,this.poll.ticked.connect((function(e,t){var i=n.payload;return"resolved"===t.phase?(n.payload=new s.PromiseDelegate,void i.resolve(t.payload)):"rejected"===t.phase||"stopped"===t.phase?(n.payload=new s.PromiseDelegate,i.promise.catch((function(e){})),void i.reject(t.payload)):void 0}),this)}return Object.defineProperty(e.prototype,"isDisposed",{get:function(){return null===this.payload},enumerable:!0,configurable:!0}),e.prototype.dispose=function(){this.isDisposed||(this.payload=null,this.poll.dispose())},e.prototype.stop=function(){return c(this,void 0,void 0,(function(){return u(this,(function(e){return[2,this.poll.stop()]}))}))},e}(),_=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return o(t,e),t.prototype.invoke=function(){return this.poll.schedule({interval:this.limit,phase:"invoked"}),this.payload.promise},t}(f),g=function(e){function t(t,n){var s=e.call(this,t,"number"===typeof n?n:n&&n.limit)||this,i="leading";return"number"!==typeof n&&(i="edge"in(n=n||{})?n.edge:i),s._interval="trailing"===i?s.limit:p.IMMEDIATE,s}return o(t,e),t.prototype.invoke=function(){return"invoked"!==this.poll.state.phase&&this.poll.schedule({interval:this._interval,phase:"invoked"}),this.payload.promise},t}(f)},39770:function(e,t,n){"use strict";n.r(t),n.d(t,{AttachedProperty:function(){return i}});var s,i=function(){function e(e){this._pid=s.nextPID(),this.name=e.name,this._create=e.create,this._coerce=e.coerce||null,this._compare=e.compare||null,this._changed=e.changed||null}return e.prototype.get=function(e){var t=s.ensureMap(e);return this._pid in t?t[this._pid]:t[this._pid]=this._createValue(e)},e.prototype.set=function(e,t){var n,i=s.ensureMap(e);n=this._pid in i?i[this._pid]:i[this._pid]=this._createValue(e);var r=this._coerceValue(e,t);this._maybeNotify(e,n,i[this._pid]=r)},e.prototype.coerce=function(e){var t,n=s.ensureMap(e);t=this._pid in n?n[this._pid]:n[this._pid]=this._createValue(e);var i=this._coerceValue(e,t);this._maybeNotify(e,t,n[this._pid]=i)},e.prototype._createValue=function(e){return(0,this._create)(e)},e.prototype._coerceValue=function(e,t){var n=this._coerce;return n?n(e,t):t},e.prototype._compareValue=function(e,t){var n=this._compare;return n?n(e,t):e===t},e.prototype._maybeNotify=function(e,t,n){var s=this._changed;s&&!this._compareValue(t,n)&&s(e,t,n)},e}();!function(e){e.clearData=function(e){s.ownerData.delete(e)}}(i||(i={})),function(e){e.ownerData=new WeakMap,e.nextPID=function(){var e=0;return function(){return"pid-"+(""+Math.random()).slice(2)+"-"+e++}}(),e.ensureMap=function(t){var n=e.ownerData.get(t);return n||(n=Object.create(null),e.ownerData.set(t,n),n)}}(s||(s={}))},4016:function(e,t,n){"use strict";n.r(t),n.d(t,{Signal:function(){return r}});var s,i=n(35259),r=function(){function e(e){this.sender=e}return e.prototype.connect=function(e,t){return s.connect(this,e,t)},e.prototype.disconnect=function(e,t){return s.disconnect(this,e,t)},e.prototype.emit=function(e){s.emit(this,e)},e}();!function(e){e.disconnectBetween=function(e,t){s.disconnectBetween(e,t)},e.disconnectSender=function(e){s.disconnectSender(e)},e.disconnectReceiver=function(e){s.disconnectReceiver(e)},e.disconnectAll=function(e){s.disconnectAll(e)},e.clearData=function(e){s.disconnectAll(e)},e.getExceptionHandler=function(){return s.exceptionHandler},e.setExceptionHandler=function(e){var t=s.exceptionHandler;return s.exceptionHandler=e,t}}(r||(r={})),function(e){function t(e){var t=s.get(e);t&&0!==t.length&&((0,i.each)(t,(function(e){if(e.signal){var t=e.thisArg||e.slot;e.signal=null,l(r.get(t))}})),l(t))}function n(e){var t=r.get(e);t&&0!==t.length&&((0,i.each)(t,(function(e){if(e.signal){var t=e.signal.sender;e.signal=null,l(s.get(t))}})),l(t))}e.exceptionHandler=function(e){console.error(e)},e.connect=function(e,t,n){n=n||void 0;var i=s.get(e.sender);if(i||(i=[],s.set(e.sender,i)),c(i,e,t,n))return!1;var o=n||t,a=r.get(o);a||(a=[],r.set(o,a));var u={signal:e,slot:t,thisArg:n};return i.push(u),a.push(u),!0},e.disconnect=function(e,t,n){n=n||void 0;var i=s.get(e.sender);if(!i||0===i.length)return!1;var o=c(i,e,t,n);if(!o)return!1;var a=n||t,u=r.get(a);return o.signal=null,l(i),l(u),!0},e.disconnectBetween=function(e,t){var n=s.get(e);if(n&&0!==n.length){var o=r.get(t);o&&0!==o.length&&((0,i.each)(o,(function(t){t.signal&&t.signal.sender===e&&(t.signal=null)})),l(n),l(o))}},e.disconnectSender=t,e.disconnectReceiver=n,e.disconnectAll=function(e){t(e),n(e)},e.emit=function(e,t){var n=s.get(e.sender);if(n&&0!==n.length)for(var i=0,r=n.length;i<r;++i){var o=n[i];o.signal===e&&u(o,t)}};var s=new WeakMap,r=new WeakMap,o=new Set,a="function"===typeof requestAnimationFrame?requestAnimationFrame:setImmediate;function c(e,t,n,s){return(0,i.find)(e,(function(e){return e.signal===t&&e.slot===n&&e.thisArg===s}))}function u(t,n){var s=t.signal,i=t.slot,r=t.thisArg;try{i.call(r,s.sender,n)}catch(o){e.exceptionHandler(o)}}function l(e){0===o.size&&a(h),o.add(e)}function h(){o.forEach(d),o.clear()}function d(e){i.ArrayExt.removeAllWhere(e,p)}function p(e){return null===e.signal}}(s||(s={}))},96562:function(e){function t(e){return"number"===typeof e||(!!/^0x[0-9a-f]+$/i.test(e)||/^[-+]?(?:\d+(?:\.\d*)?|\.\d+)(e[-+]?\d+)?$/.test(e))}function n(e,t){return"constructor"===t&&"function"===typeof e[t]||"__proto__"===t}e.exports=function(e,s){s||(s={});var i={bools:{},strings:{},unknownFn:null};"function"===typeof s.unknown&&(i.unknownFn=s.unknown),"boolean"===typeof s.boolean&&s.boolean?i.allBools=!0:[].concat(s.boolean).filter(Boolean).forEach((function(e){i.bools[e]=!0}));var r={};Object.keys(s.alias||{}).forEach((function(e){r[e]=[].concat(s.alias[e]),r[e].forEach((function(t){r[t]=[e].concat(r[e].filter((function(e){return t!==e})))}))})),[].concat(s.string).filter(Boolean).forEach((function(e){i.strings[e]=!0,r[e]&&(i.strings[r[e]]=!0)}));var o=s.default||{},a={_:[]};Object.keys(i.bools).forEach((function(e){u(e,void 0!==o[e]&&o[e])}));var c=[];function u(e,n,s){if(!s||!i.unknownFn||function(e,t){return i.allBools&&/^--[^=]+$/.test(t)||i.strings[e]||i.bools[e]||r[e]}(e,s)||!1!==i.unknownFn(s)){var o=!i.strings[e]&&t(n)?Number(n):n;l(a,e.split("."),o),(r[e]||[]).forEach((function(e){l(a,e.split("."),o)}))}}function l(e,t,s){for(var r=e,o=0;o<t.length-1;o++){if(n(r,a=t[o]))return;void 0===r[a]&&(r[a]={}),r[a]!==Object.prototype&&r[a]!==Number.prototype&&r[a]!==String.prototype||(r[a]={}),r[a]===Array.prototype&&(r[a]=[]),r=r[a]}var a;n(r,a=t[t.length-1])||(r!==Object.prototype&&r!==Number.prototype&&r!==String.prototype||(r={}),r===Array.prototype&&(r=[]),void 0===r[a]||i.bools[a]||"boolean"===typeof r[a]?r[a]=s:Array.isArray(r[a])?r[a].push(s):r[a]=[r[a],s])}function h(e){return r[e].some((function(e){return i.bools[e]}))}-1!==e.indexOf("--")&&(c=e.slice(e.indexOf("--")+1),e=e.slice(0,e.indexOf("--")));for(var d=0;d<e.length;d++){var p=e[d];if(/^--.+=/.test(p)){var f=p.match(/^--([^=]+)=([\s\S]*)$/),_=f[1],g=f[2];i.bools[_]&&(g="false"!==g),u(_,g,p)}else if(/^--no-.+/.test(p)){u(_=p.match(/^--no-(.+)/)[1],!1,p)}else if(/^--.+/.test(p)){_=p.match(/^--(.+)/)[1];void 0===(w=e[d+1])||/^-/.test(w)||i.bools[_]||i.allBools||r[_]&&h(_)?/^(true|false)$/.test(w)?(u(_,"true"===w,p),d++):u(_,!i.strings[_]||"",p):(u(_,w,p),d++)}else if(/^-[^-]+/.test(p)){for(var m=p.slice(1,-1).split(""),v=!1,y=0;y<m.length;y++){var w;if("-"!==(w=p.slice(y+2))){if(/[A-Za-z]/.test(m[y])&&/=/.test(w)){u(m[y],w.split("=")[1],p),v=!0;break}if(/[A-Za-z]/.test(m[y])&&/-?\d+(\.\d*)?(e-?\d+)?$/.test(w)){u(m[y],w,p),v=!0;break}if(m[y+1]&&m[y+1].match(/\W/)){u(m[y],p.slice(y+2),p),v=!0;break}u(m[y],!i.strings[m[y]]||"",p)}else u(m[y],w,p)}_=p.slice(-1)[0];v||"-"===_||(!e[d+1]||/^(-|--)[^-]/.test(e[d+1])||i.bools[_]||r[_]&&h(_)?e[d+1]&&/^(true|false)$/.test(e[d+1])?(u(_,"true"===e[d+1],p),d++):u(_,!i.strings[_]||"",p):(u(_,e[d+1],p),d++))}else if(i.unknownFn&&!1===i.unknownFn(p)||a._.push(i.strings._||!t(p)?p:Number(p)),s.stopEarly){a._.push.apply(a._,e.slice(d+1));break}}return Object.keys(o).forEach((function(e){(function(e,t){var n=e;return t.slice(0,-1).forEach((function(e){n=n[e]||{}})),t[t.length-1]in n})(a,e.split("."))||(l(a,e.split("."),o[e]),(r[e]||[]).forEach((function(t){l(a,t.split("."),o[e])})))})),s["--"]?(a["--"]=new Array,c.forEach((function(e){a["--"].push(e)}))):c.forEach((function(e){a._.push(e)})),a}},56500:function(){},26470:function(e,t,n){"use strict";var s=n(83454);function i(e){if("string"!==typeof e)throw new TypeError("Path must be a string. Received "+JSON.stringify(e))}function r(e,t){for(var n,s="",i=0,r=-1,o=0,a=0;a<=e.length;++a){if(a<e.length)n=e.charCodeAt(a);else{if(47===n)break;n=47}if(47===n){if(r===a-1||1===o);else if(r!==a-1&&2===o){if(s.length<2||2!==i||46!==s.charCodeAt(s.length-1)||46!==s.charCodeAt(s.length-2))if(s.length>2){var c=s.lastIndexOf("/");if(c!==s.length-1){-1===c?(s="",i=0):i=(s=s.slice(0,c)).length-1-s.lastIndexOf("/"),r=a,o=0;continue}}else if(2===s.length||1===s.length){s="",i=0,r=a,o=0;continue}t&&(s.length>0?s+="/..":s="..",i=2)}else s.length>0?s+="/"+e.slice(r+1,a):s=e.slice(r+1,a),i=a-r-1;r=a,o=0}else 46===n&&-1!==o?++o:o=-1}return s}var o={resolve:function(){for(var e,t="",n=!1,o=arguments.length-1;o>=-1&&!n;o--){var a;o>=0?a=arguments[o]:(void 0===e&&(e=s.cwd()),a=e),i(a),0!==a.length&&(t=a+"/"+t,n=47===a.charCodeAt(0))}return t=r(t,!n),n?t.length>0?"/"+t:"/":t.length>0?t:"."},normalize:function(e){if(i(e),0===e.length)return".";var t=47===e.charCodeAt(0),n=47===e.charCodeAt(e.length-1);return 0!==(e=r(e,!t)).length||t||(e="."),e.length>0&&n&&(e+="/"),t?"/"+e:e},isAbsolute:function(e){return i(e),e.length>0&&47===e.charCodeAt(0)},join:function(){if(0===arguments.length)return".";for(var e,t=0;t<arguments.length;++t){var n=arguments[t];i(n),n.length>0&&(void 0===e?e=n:e+="/"+n)}return void 0===e?".":o.normalize(e)},relative:function(e,t){if(i(e),i(t),e===t)return"";if((e=o.resolve(e))===(t=o.resolve(t)))return"";for(var n=1;n<e.length&&47===e.charCodeAt(n);++n);for(var s=e.length,r=s-n,a=1;a<t.length&&47===t.charCodeAt(a);++a);for(var c=t.length-a,u=r<c?r:c,l=-1,h=0;h<=u;++h){if(h===u){if(c>u){if(47===t.charCodeAt(a+h))return t.slice(a+h+1);if(0===h)return t.slice(a+h)}else r>u&&(47===e.charCodeAt(n+h)?l=h:0===h&&(l=0));break}var d=e.charCodeAt(n+h);if(d!==t.charCodeAt(a+h))break;47===d&&(l=h)}var p="";for(h=n+l+1;h<=s;++h)h!==s&&47!==e.charCodeAt(h)||(0===p.length?p+="..":p+="/..");return p.length>0?p+t.slice(a+l):(a+=l,47===t.charCodeAt(a)&&++a,t.slice(a))},_makeLong:function(e){return e},dirname:function(e){if(i(e),0===e.length)return".";for(var t=e.charCodeAt(0),n=47===t,s=-1,r=!0,o=e.length-1;o>=1;--o)if(47===(t=e.charCodeAt(o))){if(!r){s=o;break}}else r=!1;return-1===s?n?"/":".":n&&1===s?"//":e.slice(0,s)},basename:function(e,t){if(void 0!==t&&"string"!==typeof t)throw new TypeError('"ext" argument must be a string');i(e);var n,s=0,r=-1,o=!0;if(void 0!==t&&t.length>0&&t.length<=e.length){if(t.length===e.length&&t===e)return"";var a=t.length-1,c=-1;for(n=e.length-1;n>=0;--n){var u=e.charCodeAt(n);if(47===u){if(!o){s=n+1;break}}else-1===c&&(o=!1,c=n+1),a>=0&&(u===t.charCodeAt(a)?-1===--a&&(r=n):(a=-1,r=c))}return s===r?r=c:-1===r&&(r=e.length),e.slice(s,r)}for(n=e.length-1;n>=0;--n)if(47===e.charCodeAt(n)){if(!o){s=n+1;break}}else-1===r&&(o=!1,r=n+1);return-1===r?"":e.slice(s,r)},extname:function(e){i(e);for(var t=-1,n=0,s=-1,r=!0,o=0,a=e.length-1;a>=0;--a){var c=e.charCodeAt(a);if(47!==c)-1===s&&(r=!1,s=a+1),46===c?-1===t?t=a:1!==o&&(o=1):-1!==t&&(o=-1);else if(!r){n=a+1;break}}return-1===t||-1===s||0===o||1===o&&t===s-1&&t===n+1?"":e.slice(t,s)},format:function(e){if(null===e||"object"!==typeof e)throw new TypeError('The "pathObject" argument must be of type Object. Received type '+typeof e);return function(e,t){var n=t.dir||t.root,s=t.base||(t.name||"")+(t.ext||"");return n?n===t.root?n+s:n+e+s:s}("/",e)},parse:function(e){i(e);var t={root:"",dir:"",base:"",ext:"",name:""};if(0===e.length)return t;var n,s=e.charCodeAt(0),r=47===s;r?(t.root="/",n=1):n=0;for(var o=-1,a=0,c=-1,u=!0,l=e.length-1,h=0;l>=n;--l)if(47!==(s=e.charCodeAt(l)))-1===c&&(u=!1,c=l+1),46===s?-1===o?o=l:1!==h&&(h=1):-1!==o&&(h=-1);else if(!u){a=l+1;break}return-1===o||-1===c||0===h||1===h&&o===c-1&&o===a+1?-1!==c&&(t.base=t.name=0===a&&r?e.slice(1,c):e.slice(a,c)):(0===a&&r?(t.name=e.slice(1,o),t.base=e.slice(1,c)):(t.name=e.slice(a,o),t.base=e.slice(a,c)),t.ext=e.slice(o,c)),a>0?t.dir=e.slice(0,a-1):r&&(t.dir="/"),t},sep:"/",delimiter:":",win32:null,posix:null};o.posix=o,e.exports=o},57129:function(e,t){"use strict";var n=Object.prototype.hasOwnProperty;function s(e){try{return decodeURIComponent(e.replace(/\+/g," "))}catch(t){return null}}function i(e){try{return encodeURIComponent(e)}catch(t){return null}}t.stringify=function(e,t){t=t||"";var s,r,o=[];for(r in"string"!==typeof t&&(t="?"),e)if(n.call(e,r)){if((s=e[r])||null!==s&&undefined!==s&&!isNaN(s)||(s=""),r=i(r),s=i(s),null===r||null===s)continue;o.push(r+"="+s)}return o.length?t+o.join("&"):""},t.parse=function(e){for(var t,n=/([^=?#&]+)=?([^&]*)/g,i={};t=n.exec(e);){var r=s(t[1]),o=s(t[2]);null===r||null===o||r in i||(i[r]=o)}return i}},47418:function(e){"use strict";e.exports=function(e,t){if(t=t.split(":")[0],!(e=+e))return!1;switch(t){case"http":case"ws":return 80!==e;case"https":case"wss":return 443!==e;case"ftp":return 21!==e;case"gopher":return 70!==e;case"file":return!1}return 0!==e}},84564:function(e,t,n){"use strict";var s=n(47418),i=n(57129),r=/^[\x00-\x20\u00a0\u1680\u2000-\u200a\u2028\u2029\u202f\u205f\u3000\ufeff]+/,o=/[\n\r\t]/g,a=/^[A-Za-z][A-Za-z0-9+-.]*:\/\//,c=/:\d+$/,u=/^([a-z][a-z0-9.+-]*:)?(\/\/)?([\\/]+)?([\S\s]*)/i,l=/^[a-zA-Z]:/;function h(e){return(e||"").toString().replace(r,"")}var d=[["#","hash"],["?","query"],function(e,t){return _(t.protocol)?e.replace(/\\/g,"/"):e},["/","pathname"],["@","auth",1],[NaN,"host",void 0,1,1],[/:(\d*)$/,"port",void 0,1],[NaN,"hostname",void 0,1,1]],p={hash:1,query:1};function f(e){var t,s=("undefined"!==typeof window?window:"undefined"!==typeof n.g?n.g:"undefined"!==typeof self?self:{}).location||{},i={},r=typeof(e=e||s);if("blob:"===e.protocol)i=new m(unescape(e.pathname),{});else if("string"===r)for(t in i=new m(e,{}),p)delete i[t];else if("object"===r){for(t in e)t in p||(i[t]=e[t]);void 0===i.slashes&&(i.slashes=a.test(e.href))}return i}function _(e){return"file:"===e||"ftp:"===e||"http:"===e||"https:"===e||"ws:"===e||"wss:"===e}function g(e,t){e=(e=h(e)).replace(o,""),t=t||{};var n,s=u.exec(e),i=s[1]?s[1].toLowerCase():"",r=!!s[2],a=!!s[3],c=0;return r?a?(n=s[2]+s[3]+s[4],c=s[2].length+s[3].length):(n=s[2]+s[4],c=s[2].length):a?(n=s[3]+s[4],c=s[3].length):n=s[4],"file:"===i?c>=2&&(n=n.slice(2)):_(i)?n=s[4]:i?r&&(n=n.slice(2)):c>=2&&_(t.protocol)&&(n=s[4]),{protocol:i,slashes:r||_(i),slashesCount:c,rest:n}}function m(e,t,n){if(e=(e=h(e)).replace(o,""),!(this instanceof m))return new m(e,t,n);var r,a,c,u,p,v,y=d.slice(),w=typeof t,S=this,b=0;for("object"!==w&&"string"!==w&&(n=t,t=null),n&&"function"!==typeof n&&(n=i.parse),r=!(a=g(e||"",t=f(t))).protocol&&!a.slashes,S.slashes=a.slashes||r&&t.slashes,S.protocol=a.protocol||t.protocol||"",e=a.rest,("file:"===a.protocol&&(2!==a.slashesCount||l.test(e))||!a.slashes&&(a.protocol||a.slashesCount<2||!_(S.protocol)))&&(y[3]=[/(.*)/,"pathname"]);b<y.length;b++)"function"!==typeof(u=y[b])?(c=u[0],v=u[1],c!==c?S[v]=e:"string"===typeof c?~(p="@"===c?e.lastIndexOf(c):e.indexOf(c))&&("number"===typeof u[2]?(S[v]=e.slice(0,p),e=e.slice(p+u[2])):(S[v]=e.slice(p),e=e.slice(0,p))):(p=c.exec(e))&&(S[v]=p[1],e=e.slice(0,p.index)),S[v]=S[v]||r&&u[3]&&t[v]||"",u[4]&&(S[v]=S[v].toLowerCase())):e=u(e,S);n&&(S.query=n(S.query)),r&&t.slashes&&"/"!==S.pathname.charAt(0)&&(""!==S.pathname||""!==t.pathname)&&(S.pathname=function(e,t){if(""===e)return t;for(var n=(t||"/").split("/").slice(0,-1).concat(e.split("/")),s=n.length,i=n[s-1],r=!1,o=0;s--;)"."===n[s]?n.splice(s,1):".."===n[s]?(n.splice(s,1),o++):o&&(0===s&&(r=!0),n.splice(s,1),o--);return r&&n.unshift(""),"."!==i&&".."!==i||n.push(""),n.join("/")}(S.pathname,t.pathname)),"/"!==S.pathname.charAt(0)&&_(S.protocol)&&(S.pathname="/"+S.pathname),s(S.port,S.protocol)||(S.host=S.hostname,S.port=""),S.username=S.password="",S.auth&&(~(p=S.auth.indexOf(":"))?(S.username=S.auth.slice(0,p),S.username=encodeURIComponent(decodeURIComponent(S.username)),S.password=S.auth.slice(p+1),S.password=encodeURIComponent(decodeURIComponent(S.password))):S.username=encodeURIComponent(decodeURIComponent(S.auth)),S.auth=S.password?S.username+":"+S.password:S.username),S.origin="file:"!==S.protocol&&_(S.protocol)&&S.host?S.protocol+"//"+S.host:"null",S.href=S.toString()}m.prototype={set:function(e,t,n){var r=this;switch(e){case"query":"string"===typeof t&&t.length&&(t=(n||i.parse)(t)),r[e]=t;break;case"port":r[e]=t,s(t,r.protocol)?t&&(r.host=r.hostname+":"+t):(r.host=r.hostname,r[e]="");break;case"hostname":r[e]=t,r.port&&(t+=":"+r.port),r.host=t;break;case"host":r[e]=t,c.test(t)?(t=t.split(":"),r.port=t.pop(),r.hostname=t.join(":")):(r.hostname=t,r.port="");break;case"protocol":r.protocol=t.toLowerCase(),r.slashes=!n;break;case"pathname":case"hash":if(t){var o="pathname"===e?"/":"#";r[e]=t.charAt(0)!==o?o+t:t}else r[e]=t;break;case"username":case"password":r[e]=encodeURIComponent(t);break;case"auth":var a=t.indexOf(":");~a?(r.username=t.slice(0,a),r.username=encodeURIComponent(decodeURIComponent(r.username)),r.password=t.slice(a+1),r.password=encodeURIComponent(decodeURIComponent(r.password))):r.username=encodeURIComponent(decodeURIComponent(t))}for(var u=0;u<d.length;u++){var l=d[u];l[4]&&(r[l[1]]=r[l[1]].toLowerCase())}return r.auth=r.password?r.username+":"+r.password:r.username,r.origin="file:"!==r.protocol&&_(r.protocol)&&r.host?r.protocol+"//"+r.host:"null",r.href=r.toString(),r},toString:function(e){e&&"function"===typeof e||(e=i.stringify);var t,n=this,s=n.host,r=n.protocol;r&&":"!==r.charAt(r.length-1)&&(r+=":");var o=r+(n.protocol&&n.slashes||_(n.protocol)?"//":"");return n.username?(o+=n.username,n.password&&(o+=":"+n.password),o+="@"):n.password?(o+=":"+n.password,o+="@"):"file:"!==n.protocol&&_(n.protocol)&&!s&&"/"!==n.pathname&&(o+="@"),(":"===s[s.length-1]||c.test(n.hostname)&&!n.port)&&(s+=":"),o+=s+n.pathname,(t="object"===typeof n.query?e(n.query):n.query)&&(o+="?"!==t.charAt(0)?"?"+t:t),n.hash&&(o+=n.hash),o}},m.extractProtocol=g,m.location=f,m.trimLeft=h,m.qs=i,e.exports=m},12617:function(e){self,e.exports=(()=>{"use strict";var e={775:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.FitAddon=void 0;var n=function(){function e(){}return e.prototype.activate=function(e){this._terminal=e},e.prototype.dispose=function(){},e.prototype.fit=function(){var e=this.proposeDimensions();if(e&&this._terminal){var t=this._terminal._core;this._terminal.rows===e.rows&&this._terminal.cols===e.cols||(t._renderService.clear(),this._terminal.resize(e.cols,e.rows))}},e.prototype.proposeDimensions=function(){if(this._terminal&&this._terminal.element&&this._terminal.element.parentElement){var e=this._terminal._core;if(0!==e._renderService.dimensions.actualCellWidth&&0!==e._renderService.dimensions.actualCellHeight){var t=window.getComputedStyle(this._terminal.element.parentElement),n=parseInt(t.getPropertyValue("height")),s=Math.max(0,parseInt(t.getPropertyValue("width"))),i=window.getComputedStyle(this._terminal.element),r=n-(parseInt(i.getPropertyValue("padding-top"))+parseInt(i.getPropertyValue("padding-bottom"))),o=s-(parseInt(i.getPropertyValue("padding-right"))+parseInt(i.getPropertyValue("padding-left")))-e.viewport.scrollBarWidth;return{cols:Math.max(2,Math.floor(o/e._renderService.dimensions.actualCellWidth)),rows:Math.max(1,Math.floor(r/e._renderService.dimensions.actualCellHeight))}}}},e}();t.FitAddon=n}},t={};return function n(s){if(t[s])return t[s].exports;var i=t[s]={exports:{}};return e[s](i,i.exports,n),i.exports}(775)})()}}]);